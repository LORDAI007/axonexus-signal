import { useState, useCallback, useEffect, useRef, useMemo } from "react";
import { Shield, Zap, Radio, FileSearch, PhoneOff, Calculator, Layers, ChevronRight, Activity, Search, CheckCircle2, AlertTriangle, X, ArrowRight, Eye, Lock, Signal, Wifi, Database, Cpu, ScanLine, Upload, FileText, Image, MessageCircle, Send, Copy, FileDown } from "lucide-react";


const LOGO_SRC = "data:image/jpeg;base64,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AAAAAAAAAAAAAAM/Qz+Xl0B1dQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADP0M/l5dAdXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAz9DP5eXQHV1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM/Qz+Xl0B1dQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADP0M/l5dAdXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAz9DP5eXQHV1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM/Qz+Xl0B1dQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADP0M/l5dAdXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAz9DP5eX/9oADAMBAAIRAxEAACEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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zzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzojr7zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzHQYg5VTTzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzz5ax380r70/wC0888888888888888888888888888r888888888888888888888888884sJSJOgwPzDypCx88888888888888888888888888r8888888888888888888888888ypb9sCiBU5Fyrdba48888888888888888888888888r888888888888888888888881x5NgfmK4/STCJCSH65n408888888888888888888888r888888888888888888888+8g8Qf39Vf4ZSC9T8CB/wAfp3OvPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPub5laLZawDaKwPtQBRD/29KOax/PPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPO3WI3LALQz+NntwU1drP+91avEv/PPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPL5HgcPCIZfzUYRD3cK99wn/AETsCvzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzz/AOStNQ8oBxqMnK9eSNPvd5h8vzI88888888888888888888r88888888888888888888vUpdxA888qxwDVRvZ1RxFdo6Vri88888888888888888888r88888888888888888888/cm6OVJey18lgWEypSab3m9iSBP88888888888888888888r88888888888888888888/wC1AbzyNwtMVjrnGwP9Xb6xAlQdfPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPP6ezHY4/wAWYK7eHwnK4ewBSZdvfnzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzz9JgCE6GrHzWgEbb85zG8XqMOx0PzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzytQcRkDl+OXPJ7zaMET+UOsE0F7zzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzyuBHz1xK5d49L+N8tLg26D2QMXKzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzytY+yLZn7ksWJdS22dgsl46k5WJrzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzyvLHLL72dbyicgiZ7uAcFfKNEOL7zzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzy40McYPJzL/wCpcnNyq1hOpJoJRma88888888888888888888r88888888888888888888sJPwbFIDi+//APy+bpvjMFyRfg6jPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPKcEdwA0wfO0Cq884xsRsvnHPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPDfBKyQwEih6wxVXL4jvPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPPPEcauChlaQwIwbV/PPPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPPPPPooF7mJuKGfXPPPPPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPPPPPLHa2Vn26LPPPPPPPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPLC9fPvPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPDPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPK/PPPPPPPPPPNfPPP+vPM8/Ptf8AfbzrvzzrXzXHHH77XzzrHz/zzz/bzP3HH7zzzzzzzyvzzzzzzzzzyN7Pzy6RCYKSkrYm5Hb937z3nw4+GDT9hrH5nxJ/zx7/AOM0U8q88888888r888888888vBt2+88SGyk8oT88sf96j798m8dKfz08bM24c8y388oery2y3788888888r888888888SAGWW88ovVW86V888Q9oC4VMR8RGvP/APO1KytPJ3/PGNrLfPF4PPPPPPPPK/PPPPPPPPL7nnbvuJ3QTUOULYqv/qAfCPCvL9sNHvHbGbqdJTc09danPOBQPPPPPPPPK/PPPPPPPPvvPPHjj/vPL3/LvbTXPLnvPDvvL/TXXnv/ADxwxzy1337yw00x/wA88888888r88888888888888w880w4w08w88ww44480818ww48w480w0444w8w888888888888888r88888888808o0/3PKWEidWbMqA46y2Hju8D8HkYnnnnuGec0pn1rMP8Aktce/PPPPPPPK/PPPPPPPPPPPPKDj4pLDvwg4P8AZsM9OO+pwbwFOpM7YM4c9R0pwOgK7zzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzy7zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyvzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzyv/2gAIAQIRAT8A9B5abrzOj0JlpuvM6PQmWm68zo9CZabrzOj0JlpuvM6PQmWm68zo9CZabrzOj0JlpuvM6PQmWm68zo9CZabrzOj0JlpuvM6PwGScQxdFSjPRaplFTa7iuQlXf+AZabrzOjXzNhvd1LTHK4G/Vd3+ZDERNcykjZ7nuQEcWF7KGlid2D6/lpuvM6Ndd6sVNTmbyje/FWSO8nQR13MygoW0kEbMp6KxKaikCkjZ1HSDix8zKGkDI1z/AKa7lpuvM6NbrU1MEML0chSYvU3BBHwUNCcsVFAwZqRTCYqhVEn7wUQ1qahV4KWAg2J49o3OoqY4XH+6CRiwevW8tN15nRrUk4hi6lpRHhcyFv3UNEI1FRWBMp6R3eyt1BSbb2Xay6plHvaraoYmiFNTQd6q8xAxYqeg/lUkLjiyqcLxdQ02u47nTGz4X6zlpuvM6NYKRhxuU1N/LciK0oKMcmDKj0EQxxTMmTOqXGXxB+VUYCkLvCVM+T7qULQOh/5dnzILmbPLCJ4qkUF2wUo1Yso5yj+yhpgn9HTPq+Wm68zo1Z3qxU1NYbhUs5Eo4ikfy3qjdms153oY2HMykkYGrfBFIUZDJ8pKa8C+rKhfDZUz5PumUfxyVMmcG8u1QSmx2SvrzV5qRRBk2KkUAo8L2zQ01xxUVIE8H1bLTdeZ0aq71KekuSvPBlRuy3K81FAINc3sMpo+8FxUMJSH3ZFcCluAm+ioPwxVMfR+6bBR/HL7KkRsQuqBE2n7Fadq1SuzhkwxU9DOJ72uQSOyoc7nc+zVctN15nRqpYOpF2QLO5e4ovxpVPoF9lQfhiqd8n3QqP45fZS6Lrs/Q/X25hZxfaibzOuz8S1XLTdeZ0aqWDqRdkYl7iifHlU+gX2VB+GKp/yf1JnuUfxy+yl0S+y7O0P19uXRdFpKgYlquWm68zo1UsHUq7IxL3FE+PMoZXIZ6/lVB+Ey7Q+T+pDgg/xBfZUc3IZV2boe3LounxVAxLVctN15nRqpYOpFQAN7Vh7142SP4gfqyj7RAyq9itTU4BubzFwZUGM7ZmV1pUfCkqg/CZdofJ/UmwUf+IP7KhXjKoJno/lMVHKJ6L1+xNM0Y2nTdqi+AvXwTlNLfVYH/dbVQMX1XLTdeZ0aqWDqVdkYkjC01S/hIs9dpWpoMfOKhpgSban4KeniGHmfgyYJp9LyD/qoaIEezNRsKQqD8Jl2j8n9TJlF/iD+y7O/mfdGDFi1akoFnzRlZ+i/isgPUTIKSJDatMjp9ryxjafjsXgpJfiH/aqJ2f3L111qXRJPiqDiWq5abrzOjVSwUq7IxLMU4s9TkynpgB/mfgy8Gc/m+GgA6K94Wm/MqPShlwzPgqLo0hdn/CFdpfy/6k2Cj/xJ/wBK7Of4v3zPKOFplTLByNYa0v4WdVdf9qo9J7nyyBYQyC7Vs6rUpswvetqoWJarlpuvM6NVLB1MqFK4WnYbWCftF/8AlkyGw7GUldrYuzoGsWnZMu1ydmD8td6o9HtnVGdTcU1JkhukGtvzKl9oD3flet3UHeGFiMf6iVGi7sLK7T/l/wBSHBlSKOYn3sajpdia1Zs16Snpwi1Q3uWFS7uQjqvrdd0wSxZpIxNqiatUse6NxHBUM5ZPIJVMvA2fMRVqq9UPF9Vy03XmdGqlg6mXZWJKplLRQkxFQSlCXdHh8ubtCZhBxxcsFRrMEbVqWmFLWID/AHPgqPQikrfgo6Y8XkkCz/mQSMbVs9a7TLQ/qQvcqRTAjxvfgpYpKT8tgVRIzBys6Q7HUFOA7iGwSpkliWMnwQGx3qedohtP+ijoXf8Ank+bBQUYIcFLSA0bV6+ZUPF9Vy03XmdGqlg6mVCEitMD1Pcu/nj0wtIO0Q+ZnFdoUgSs2by2Ie0qvKYuLobRna03/wBFH2fae1KVr6bFTCs1RBiSgh7sWFHGx3O1aloxQ+eMv7VLMUj1k6oU0p/8MSxUFCEL9Is1Li7ohlH+5FBHOP8A5UtGkj/6gKOldzo/9qnKWVmex5UNNM7owXhZZNOSpNQgjb6raqJi+q5abrzOjVSwdTLsvEs0kQPpM1So5xhMXBdomJ2RHzEo6SUWlCg7QjLbV9HT0kik70QrYUPacdSftGvRjckUU0+l5GVK7PKJ7r2e5QdnyRVGL38FHT7PlkGyglE8HrVKdrBM7rs4q40c4hpEqXIMlTxho7V/EgsaN/5V2aYsP1TqTRdfMqLi+q5abrzOjVSwdTLsy5yU9OEXsj5y4MvDyTfEeofyrwUdVVlUmiNFZMPlUZMY1qSiAeIp6LNFaEdFUAY7NVXmTDm7R/l/1K0zNe9SpFJCTyiFt1D2celbsfRUhiExGUqxUDWpHGI3sqOgDiXnTAzLuhxsqehCV4+UkM8kHxPM35k04yDc6+ZUbbquWm68zo1UsHUyoIW2Jq6lDRQjzm1bOz4OoZPDlYPR+VC9eakUWvzhcSo9N2SeUmT0kGau0ypEzzuzRjXVtQ0Ij+KSjiEMGRHZZ32IIvFFaLRbRR9n2b4vK6GmFHdKP9yakA7WrS/iDV6L2eKZ670Q1qSiCPma5fMqNt1XLTdeZ0aqWDo6O5Kso34OoO0tkiCRjwfPLE0jVOimKi+XSH5VD2ozv5rkfaIff7Km25vM0dyocbMVUrO1eCAWG5kyJ1IXiDsDojj9UAWGqzELFc7VqTs8L7Ny7iV2aKzdxQNZZm4KkUwI/q6nphSfRQ0YyvwVHCrVctN15nRqxCpIq8VLQ3xH9kExxPcqP2iJXFcmeu9r83aVGKRqx2KOjEz2nGurFUbuybyVZpYBNqnQSlR/KehsJW2fB1SZnN+7DF8X4KCJoxq9mWcY8SVJ7RI7huZRQHJ/7UVCYPrq+Wm68zo1ipS0YZFPQTjvxZQ0w4vr9FR6cEn0fhmqUtDq88fldQUu15S8pZjBiap1SDcCIWK5dknWRN7ByMF7vUqR2nX5Q/dWTlf8yo/ZrNea0cNYy03XmdGtW1PQBk0fK6moxxPh+qo/aJBcV7KKkjJg+akUUZPvxUdIKHyyf9yZ66na9Urs8ZXra5UWiDC2OZyq+ipHaIjcN7qSU5X4qj9nE95XNwQAMeiytazlpuvM6Nc0riVJ7NteYE4nE+FTqjdp7DUcom1bPWpI2NqnZFGdH0fMPBRSsYsVWaemhHdi6mpRyKCglJjcyho4RJy1vLTdeZ0a7aRCMlxKkdmON4IJCje676Kj9osVxJnr+qlnCNr1PTiPRuUVHKV1DQhjvdOWu5abrzOjXxOpS0cJcVPQSDC9lHSDC5nQgUr8VBQGG81aqw1/LTdeZ0fgLGpKIEl6GyGCcvwDLTdeZ0ehMtN15nR6Ey03XmdHu3dW24+w5s21MTPtzubNi6YmfB8zkzYrvR/My70fzMu9H8zJnrzOTNi9SY2fbnd6sUxs+D5rbcV3o8V3g8WXeD+ZkxM+D1pyZsVbbjnd6lbbjmc24pnrzubNtTPXmcmbarbcVbbirbcUxM+D1+5y03XmdHu6XLsZ04u1TqjyWmz0ij9590BFCShmaRq1SaQ0bfVABTFiooWjapkRWWd1JIUhVLwci8FIiocjKGUgL/dM9a7Q0W+6E3F62VHpDSN9c1O+GuztJ/tmpN8hXoaHITVsvAyf/OvAyKiRPGNRKSNjap1PCURfTYqJSrdxYozYWrdTTlK9TKi0aze+Oal6bqjaDZ6XpqjaAqU7Iu680jrwhrwhrwhqjQkGPuctN15nR7qQ7LIW7wlLFWP2UElgqk19+ekUdja7FCZRO9SBimJRRNG1TZp9F1Rm84+xK3nJR6LLtDRb7qjQsbEiAoSVGpPeY4qm6CoGl+mak6ZKOmiLM1WC/iA8HXjx4OhK0zPmkjY2qdTwvEX+yOcpLnVGorD5nz0rTdUbQbPStN1RtAVSBrB1DJ3ZLxrcF41uC8YPBRyMWHuctN15nR7qlSVvUopLC8Y/BE9bqiy2mq4Z6VSbLVNioqOUq80JfZUekNJ9+GakaBKjv5x9iXTJR6LKn6LfdUD5lNC0jIweIkdI7yO/FUHS/TNSdMlHRAcWXgg4LwQcELVNVmnmYGvROUxKajFHUqLS/lLPStN1R9Bs9K03VH0BzFRhdeDFeDFTUdhZUR/N7nLTdeZ0e5mOyKijcyXcjwXcj+VSQM7XMo3sF/umetUieq5lFA8j1ugBhaplPA0jf+VZOIvsqPP3jIhrZ2UsZRumpRrxcielG6hiIywQtVcqc3lb7qgNpZpImNr1LC4OqC3m/TNSGe2SGkG1y8VIvEyKimRM9allssitSEoKOwfdGDE1TqejPG92CotI+V81MhfSUcxhcvFGvEmhAjJCNTVKUnYXdl4iReINeINHKRKixVXv7nLTdeZ0e5dkzexZZVJxbgmarO4s+LJhZsGzO1eLLux4Lux4Mu7Hhndq0zZ3ZMP0zWW4Kw3BWG4Kw3BMydvorLNszuysNwz2G4Kw3Bl3Y8EzZnVluCstwVluCstw91lpuvM6NRq1Jjvq1CrUctN15nR7pyqTys3/AOJ6QzbH/ZRy2tjt90OOaq9GVSxZBwQDVe+xDinW1EpV8rI18qC5ndV2ltRiibytmb4j/bMWiKCqzegDzfRbcz4oSuREpPlQEjNNougxZYOrflVaJEieq9d+3B/2TTNwf9lb/wDqkz+5y03XmdHv7Qp3VtW+CrRnaTPU7K0OZzRK0yJWrkJVK0KrREiktZm+I/2zOSruQSWc1oeCdM9TZjJC9SdCVStMq1auqzOY+/y03XmdH4HVt/ActN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdC//aAAgBAxEBPwD0HlpuvM6PQmWm68zo9CZabrzOj0JlpuvM6PQmWm68zo9CZabrzOj0JlpuvM6PQmWm68zo9CZabrzOj0JlpuvM6PQmWm68zo/AQjcsE0Yjjejg2i9bJ7vwDLTdeZ0a+Iu+CGFhvL9kUvC5k5oDqwXlPG5+KkhIfq3HX8tN15nRrwUfaVytsOiiL6o5kRoJakJs6GR2RAJ34Ojjccddy03XmdGuBC5X4MvKOF78UR14opWZFJXmCK69ShZVdSCVCbOmk43ooWLR/ZELjjreWm68zo1oAcsEEYjje6Iq0UrMjlrToI60cdShNEVp13T5mKpBKhLgrdq4mrRwbRvTtrOWm68zo1gRrQw1Yr7XIzZlJNWnfPETYcVJU1yi2oXvX1rTvfnE3ZBKhLgiESxudSQOP1bWMtN15nRq1SCB3vdMNWCMqsVJPwTlXnEa7lZrarggbzKbSUW3M+gohrRA1VfsRyuyCZiTOigYsLkcbjjq2Wm68zo1VlHEworlLSOCKR39kCsvWjOprXFBpKbFRbcxaCjKp1OWz2WepR0h2QTMSq2Op4rOG3VctN15nRqrYtmpT3N7D+xJoCo8WU2Kh25i0EOxT6XtgVTshVK2arlpuvM6NVbFkypeDe4k0BUekym0lBtTotBkKn0vbHFvuhVK2arlpuvM6NVbFCqXg3uJdAUQ1OCn0lBtTp9BkY1WVPpe2GLJlStmq5abrzOjVWQqd2aqtdwJaLoqMQsqvYCB3+jKZ2qEWvqUmMan0lBtTr+Wyl+VGFvRRC7Y+wEbk9TIqI7bV5B+rplScB1XLTdeZ0aq2xAqZgKEqnXi/ovJJ/ldSQOP1QUd3+jK0AYXujlIsx4gp9JUfan2ovhsp/lTPUhn2FevCiTXIo3Z6qkFH2lcu/ENFTUi3ghxZMqTg2q5abrzOjVW2IFS8GzNG77FHA743Mu+ELtJWhk21KWJwxzyYxqkaSo21Pi6/lsqR8uay/BQ1sHm2LxTYVfqpI7V4l+icXbYqlGz1smVIwbVctN15nRqrbECnC1ZaupNRv8AMqnrazgqRJ5qmzUSqt9r7FJJUPnZd0J6Nyige1fsUllnrLZgylO09ao/zfZPio5Bs2XXdWgqxUcD133KsWZWncCzCbsoPM1bqcQa92Xf8BqWxUjBtVy03XmdGqio1S9irUczipA7xrTbMU6owO71tsUtZldegiYLye/gpJ2G7ijit3i9aIHZUbb9kWLoIXJCYx7a1ITOzV3M+1HC+x61CNYk21ONSijc3qZHNY8oqSVzQRutin2arlpuvM6NVZAp3by1qwBYPUnor7HrUEZDXXcio1d7PXxVphGrBv8AVPPVo/uoWr8xbFIdp60JVbakMrHcSEGG5TALeapHM7/Rs0JWvI6YyjdDKJf5XRQ2sf3UbCL1VooBG8iXegODLvyLNPs1XLTdeZ0aqyBUzAcwu+xSWnBlRhIa3e5kcTHexJ6OS7tmGy73unopYLw9WLsrQBheo52Ku5HOJXOio9d4vWiB2xZRM9bVKkaSaN3wUXlucsV4Z669ipQX/bMGLZp9Vy03XmdGqsgVKwFBA743MikANG9+K78uKimt+UtqMbL1IZXbau9Aqn2qe1WnfNR/m+yqre5RxuN7vZRzjwtKOpxrEUb1DWbXop/0TlWrb8UE7tc97LuxPRuXduLtctim1XLTdeZ0aqKBTlVU6OVyzi9T1ox7y/aqqs0c2wsFJBtG9k0RcEAd3pOnns6LIjckwu73Jz7pqmxfFeI/Neu5EtF/0XclXVUvCvxVSrQzO92KbBTarlpuvM6NVbYhOyrjUtF4IhdsWzgVm9MDS34VI6JVhemoxPjcorMd1pTFd5UVecW7tq3xfBEVeZidkFKfbeu8BvNXinKt3UcLkghYEcrMpS1XLTdeZ0asxIDQTcUQialo1WF6qqzUaVhufajkF7q71JabHMEji6MWkwThsUQVeYtikO0/shG5KOjsON6KRgRzWtXy03XmdGshLZUc7OjhYkcLjmrQS7CRw7RvbML1YIKiatUpvYEa7lHR+KuBkdJ4LHWMtN15nRrcdIcUEgmpKPXhcjjcdmaOVx+yIGO8U7VKOeypZbeapRwV4oRYVJPwRE5a1lpuvM6NcwQUjj+6rYm4qSj8E41ISdsF5ZMbnRhZerMETugjZkczNgiNy1zLTdeZ0a9e2CCfinZiUkLqqpWXJDFUiNhRSO+vZabrzOj8AYnZDKz4qwzqthRy14fgGWm68zo/Au8dlj+A5abrzOj0JlpuvM6PQmWm68zo95Zf2KnTtVnZnTtVmqVl+CsPwVh+CqzM1aqzs1ads1l+CsvwVl+CsvwTsmatWX4Z2Vl81XsM2epWX4Ky/BWX4J2q9zlpuvM6PdwBtTOz1spRqfPFLZTiMgowsuoorb/RE4xspDcnrTNW9SEWBl4gV4kU1IFSAxsqqlRcXTgztUpYrGaj6bKlYNmh0WT0gWXigXiRU5sb1tcgKp61HIMjYKeCzeyFrT1Mo4mBr1NLawuzQaKm0nzwaKl0nQDW7MrgZd+K78V34qY2LD3OWm68zo90A1vUiewyCSp1KFpq/YilcU4tIyJ2iFGbk9eaPSZTP5fYj0UWLqi6TqeSzZQk0jKWGw/0VH0mVJe5s0OiKKiu7u68KXFeELinbMJOz1qKTvGqdDEIVup5rWGeDRUuk+eDRZS6TqJ/MykG0y8O68M/Fdw6IHH3OWm68zo91AG1SBaXcfVM1TKYKnzwQ2lJK0bVK6QVLE4Pmj0mU2j7AaKLF1RcXVK+VBI4vcmNpGQxWTVJwbNFosipBM7svEFxXiC4p3zRx2nQs0bKKZjuU0G1s8GipdJ88Oiyk0nzDMTLv3XfkopnJ6lO13uctN15nR7mMa3RlZZd4/Fd4XFDI/FF52Tsoo68UcrA1yIq3rdRSuD/AEVYyCpY7DpnqvQmxN/uu5FdwKaAUcjC1WajYuqTszAbjggkYlSMGzRP5WXciu5BdyCmFhe5AFp0NmNlLK5piqUM1q5TxNiyqVHkZrnRgJLuRXcinNhZO9aBq3Zd0K7oV3QoQFr2Ux7Pc5abrzOj31arVfsVp3zVq0/FWn4q0/HPX7NeatV/VVqvPX7Fb561afirT+xWq/qq/qq/dZabrzOj8Dqur9qvNXnr1bLTdeZ0e6spgfiu6fi37ogq2p8+KwdOifBFhm2ZgW1CvmT4rBPggTY5vl/XM2Lp8URXJ8PZHaiQraiwzbcw5mZd39WVj6qz7rLTdeZ0e+f2hFOr81nNVmq2p2rVT5mZWc3y/rmqW1EOay+Z2TqpFmdlVmqvzD7/AC03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nR6Ey03XmdHoTLTdeZ0ehMtN15nQv/9oACAEBAgg/Av8AoxLB/wBhDuyPAndfwDT5HZFXPFju9DZ4vmruxeFgiR4Pyhc2d2U5fnNFQrrmdI83ZZoq5csd2PJ4dXqKckbPF8lWLNloIfg/FurrYehuhYvkbuynTV+sFvpVCuuS0j0PYtsusvQmPNFXIFjux6OwnsfnLrJfgekjZ4vi6y2Wn+dDrJj1N1k+MMp+l6z71qhcq7z6z75z3n1n3znvPrPvnPefWffOe7e8esfcW75z3brHrHrnvWPWPXLEO60mU26x6x6tULTiy5AxDx2GUjv1j1j1dFQrRgioXJWUjNrUjx6x6x6xV48CRULlHq1JVn1j1j1mkMQ9uSoizKRs3tTl1j1j1gkQO6GIfJnihi84L2PDrBDPzdabdlxtng8aH5siqy82ZTh1gxW2snbvRnkCGLR2u/OPWKG5tM6LsuRvF73ZSO1Qh36uioRNqrb3d2LCB8c3Ize5Tt+RlIxn4uhlJ7vUxYemIRV+7bq8XSG7LjiHdPCkq8iHdZTpO6KheBm9mLkc4vS2xQ9JPlLFdqyeGxNvBSNiwZSNXWGw8EPkTshkYSO6Jy6w3Gs0O0k3XH9rLTgWfVkVCF4s3qPzZccYtBZerPJizjUYuSMWSxZSN5K6Khcv9CtGCuh6qGrvl6JsjYkWbPWixceYvNt8EPSnFlOLFqId2Kz8C407sWTJssvQh29C1KsFb0e+NrwMQ7s3zYtCBab8CuvIxIfnjzKR/X74oq/QuQsp82YroeTKcHtb3mh+bsXi1XgXJfZvaoVmUjxqEPRRUKzKbbI98pXhjEO7F5z9ZvwK9PkYh+Xy2j9DttosWHrDd2RV+uYMptuK68DyQ/N2bK1QlzNm6tUK9P6HZFX6uym2yFzfZjEVXZPgV6RiN3zunwMQ/DwXljEVeefMp/Vt0f6Nlar9C/gFi8qz8IX8Cx/h2knQknWkkkkknOdaSSSSSfop0Jykkkkkkkn7o83gtF80eLznGebu7/h1askkkk/YZJJJJJH9okkkX2VfTrB/SLxm+JL6VZPg6y968YxqLRggggggjBaDzi8EZwQQQQQR9m/Fvzp+9ZaL019CtJ4LQeq+AwQQQQR9uggggjRi0EEf3jOoVZVvakdQnN3ZX+R8xubfI+ZVZM+Z88aR1FNV90LRV3tZXdQqyrcTg+Z8j54KqD5HzG5s8E4PmfIdU2+R8x1T9vg+J8T4kEEYIqp0FZ3pXg+IzoiT4jvA1klI6Ls9C1KtsEVU5/01e707kFauiCD4nxPiQR9uSkaEP3b1alD3d+8lf2PR9ECWDHtqu0SNCH7y/pfvBqyWHeEfeoIwgSwjCCLq0XgjKCLqz0HdYwRpPGNCCCP/ABBf/9oACAEBAwE/If8A69xd5dagi3/wGm4/1Dj5IQfuD/cJs9ftiFYluolXqJRg0JdqClFu5PrzcWfpCX4CLMFstCLWW7/BLMmCLiDAq9j9covH2UQy6gi3BuKsoNTXIbS04HUsFNoeuQkalYJLbKjr6oTb61TUz/cfsBO540lPYRcHC0EuBiyOVoUB8h4o2H7DDJs9YtilRVHLqLWoSwQ1dMyiAjGAAotfIbwnXFiiAQ1dM8ZbCk0J70E/Vyuc/SGaEWYJZaBtFK1G20tkcC9VgXPyXCzeWgbmdxLLTgi4gwSv1WuJaaIZdQTasEKrEZ165DuWlkYpSNV1GClkjQkWZkt34oGUvAuil65CElVwXcMsqXmqLD6nXcz/AFH70VjpCC6KaCXA90mZJ+p6i1pV2JrJlg/fwe6Sq2Qqq6FQJjLhaGFVNCiPETgiILs9RtwLWol2oq6uN1V0zKQuQRxIdZM0W9z2HhCUslcPPwU6skyukajty9RUkq0vjUV8gviumDJrEv0EvQJz6g3hjP4JvgIVsEctA6ila5jbqf4ZZqn2IhZsxjS74eXg1K5CSitdMTL/ACfhUtKZQK1rmI5ecETuf5D9IbK/TtwZTVRFZdBNuCEluBKpXuPZafwO26Ql5jti/kx8/wCcfAx1UmBAzR4ucbWWgW6U7iElOcFXDKlUuNUW30yqtsy/eM57m6vGgIHlVNMhL8DXdYK7H3BjloJFNMPf1Y+Xj2Kx1NpoHCVrOchVef4IHtXTIpbxF7GVTuZfuE2P0q3Amitja1FK9RYXt10KR0CPxLcwr5DIKsrDc1w9/Vj5+ParHJRdFlrCGyZZfigoD5Bb3XTBklqCZ0FUUMXpO4M2rBLLQUCha5jl3/Kyu5qSg5h475MbPP8AOPYrHd+jxPyqVVDaEla5i2WnC0SLHpO4WFiJHslzX898dzh3x8mPl49qsd3aPE/O9TTipJYywsek7hYWIZ3D/PfHc4d8X9WPl49osV3aPE/PeuawsZYWvSdzlgsJO4f5747nH39WPn49osV3Z4n571zWFjLPSmvcuA7x/nujucbf1Y+fj2qxHdo8D8965rCxlnpTXuWBYd5+e6O5ZPaseHv6sfPx7VYJehmHdngfnvXPCxlh23pO5yLBYd5+e6O5ZY5vnD3dWPm49osF4Z3aPIvz3rnhYWHbek7nLAsEI0w5ZkErb8zqubO/LfN84f5MfNx7RYbwzu0Ooqar81iXUUpnLlYWMsO29J3uWBDHblnYXkgek+TJpFJkZ/hyiFqxFcerEUJO5Mb1LfN84P5MfN+cewWA8cmJrIXQkbmVL1RkErVfhSzbsh1RQVB9xKiyN1LpKphYyw7b0ne5YEMvfPCF0CeUx1yIqbx4LO4apENxbc3YiydRjLTjb5vnB3dWPk/OPYrhDby0CKEjcTWd0NoSncXS+BZ0iFVugqwSG4qTrVsLXNYWMsOy9J3uWBDL3z4bW6aGSvgRU0eB/CF1o3FMr6sjonVjiWnhs82D+THyfnHtVxws5aBjC7wciqGdgipp2FcM7IvLhaLCeuN654rDsvSd7lhWF758a0x7iGY+8MwTx2+b5wfz42Ob5x7VYR8S5k9U+xAqRsWzuKkha0bOO9c8Vh2XpPtMCwvfPGgJIipFpULVlVJerEqiTuOpkKe6CuL6MvKHoSIfCsLOrA/Nj5OParAQaRaxzAH8NkTFTjLMWqbUyXZwtC9OhSljwVWnwM6BKeCmhSVXFYdl6TvcsCwWr54JSco3KYRoMkSuOKp4J2vdsu4p8J7lZpdxwo8LzZXIkueAmUIyGx2ubFC5KGl7YYzo5ooK2CG1C0VAZAqhSd6+CzOmgrajmhFCUCWqrqL/AEC0/kV7iJwKx2XpPtMCwcGZskCA5CmUxdRJJs1fAiO2gt25krrWG0VLUkV/Jo4QKzzGlpTmNdKFqNaW5x8zFOLFFrXcg4G17im+wZxHMxHK+rwUlDdckSNHevhZQudMY0qENl654rDtvSfaYVhe+eLiWgfCNBCZ3lEcEKk6Zj1K4m+L6FOoiqYdRpZa8Nnm4X2XcUFI1wbQh0KtoxuTv0Wc74dGSKeJFFnY3NcL1iVjtvSfaYVhe+fDt52Mt1xSaIi5jsS7Vsi0KFqI8zVk7hncdc8xfmROrhsyE3yMlX2G1HXGkW4ajBzCSVlpemRmC+w3l2CJV/GXZwJZ/pV1QSF6kY9mMIxbQyJpsZ8FjEGTNUwYrHbek+0wrBDEw5ZZBfGXBR3ezJTWglIh/mPeME116uxSKnrkMZaSTYsU7a7njcnQQ2Xo7C3X2iyXXwwT1VdRKrJshDmaIvjhaLGjsJFnK455aDIULYX1Qz6nP2yhzqtSr0c6Do80i6uGH65Gz61ErZ7DpJ2nBlh2XpPsMKwZOUVELJL/AEHo+gkKK7aiulEUpNMXCg9CKqfAp9b7F/YQmoRHyIb4Yu1wOEjhNcWtCoyZ9mDGWgotG4xnlqh0RFsYQlIW8lEjRoXMWrZL44G5wuWDLDtvSfaYVhe+eKhbBTZGo96yQnA1Ldx84uO3BLPJDdQpS4cqhqyrHLWYmpOcWEldBhCRwx+9Cg/ThcajM13LqittQXp24bliR2npPsMKwvfPgfQlI5LMNb3UObRuN7Jdx/IOXPsM5HcStDNPpEMUeRAD3CV2Yr2OrMp7EaTqzPgvToOkXhspDcLRGaytGJoo2Y1Vo2y4FEYUTuQgph4JTYyyG5Vq+Y/C/wBFbs9UVjPVi1L/AEoiRwXLErHY+k+0wLC988EpKhSu5KtPJRaEURJGmQri5rGzsJtBTZXKmcxYaiNDZcmJ4fM+eCnroGWjYprSkmKHTNG1MkWPLIbGbPIs0TsaVLqnC0MX+RR7rQXw/Yeq17DZXwuWKw7D0n2mBYXuZXnQJ575jHSnfMcr14JVPKxyN24EUXRM1MEISevkc0NQ+LyPnB9RJmt0QuiE6I0EGzrIxKZDFxOkCpuZZJA7X/DSaBT+yVGpFyxKx2HpPsMCwRd5cyveOeW54oDQVO66HwvIvoIAvqNYThYrY0Vd58GdPIzGFouBuwrioqJYqawRS19Td1r+FlSMr3jKaF1iR2PpPsMCwufP8OwPAjX+SCj4Wksbp7oQglK1EEtUK5ELVlfZ3diiJO+R4w4WqQgF2Q9pd8Kg0CXROon7iMglbDkWCWy6iSkbNExrThqaxI7H0n2AyzC8FdVV+FrQ6hRmajySqNebgdEz4ymqqzHktPE9kldkqd8x7G4XktGANIVxykqPZqJlvwVl0RaFggjsPSfaEmhqDfUcx0x2xlxVNfwOaW0IOsVwS00amuLj3P0Qvj6ipERzmtquPVPwTNlvwXCKNA5Yoxt6pqbw8Gbo9DbUSaEpFhT09KJqOpUqHfBeKO4m1kESKqpY4hOJo52M6LsGzu54NQrUQud5GKj4JtDIl5Cvv+RxCSIqr2IGi4Cm0ISKzQ7iKE65+l8gh6mUStSiquRU94pJTnBVKSMVfaMaHwxO6JiUbuMzK04nUOolhXUeQkYVh2ETN8fjZQjO9gpYSjBaS3Bk+8b1MyCNTNx1P000Vat2HUJG40loKRQ+wsEtHUrio49arUQZvZjHhqOFxK6orECaEhKJUtCUub/iq1DuW51IGUWt2HktI5ibfIinW7CUenUrCSjNfoxzCQy120NjeOxvUu6prxco0PqujdFrwqvfjGn+C2KFqbk1x3d6F6dNB5CS8FJWEheoU0LJkw0zLFJqXcvbphElZpfYYwkcLXlODKl9mbA04JEXOxXU5F7rOgmNvPiZQklYrdiIwuToUagVe5XqHcRwvqW4KNSKrZqhjSnBk+4QstOCFhJRDX2DnhIfC7OLXQT5/keQkYzxMYSWZ/tELCQsFktCJqU7j2l1Zke4y0KdT9UQVoDCimuQ1loKBS9chOcF0IVql3Go4LBbQT+yUb5q4kpKtS7iqEwbirKLU1yHMtIxo6laBHqtSw1KFupAewkFodNCj3aY3VQ9TLZWq4GPKcMWWX2Y/TonLgy2NTLYperx8QIvDhaIcwksSoqsLWEoXq9fCSZwrQY1aMp7oF9VdMIK3U7D+jrwOuc4O4TqVep2xS1V0KKgSbUqyJdK0zFURes1FFdSsrmIY0pwPoqWoolpWCEhqUJeSHkJDweQksQs0LWEoWCeXgoFC1GNLcsrL5jFFFdfW861zCwqajWSCiUPUQkpzgrhJPoJF0LGC0luEIVK9xzLSy0KaldfM9dIoakrNTTIfQkDmqmhTuAUH4A9qpoPoWTORpkIoS9epYWUPWaHvDUFEfIY92FFnYQ94Slj3koJYWF/4BU0dStYCrfIEMJ1/wDAuW5/+HVNzg2QnZONFzNobDicDcRucLVXfHkkskduFqzNoJHbiRczcQnOLRXZvGwNgbA2BsDYCdZ4tWZvCR58SFdm4hI7PFFzNoJs4kXODbCbHPC0XQ2RsjZGyNkbI2X/AB2yw2WCgVPPPiWkMe1SSPsMnFaSxvLxQyY9w5cadWN8cWY2whZXDa5YW8fDwSSSSNTjcq46XIXKOp4EJuNqY5oRG3xYSXufHSXeeKVlmfQicZJwkvQv+NQld4OVllhyl3FxIWGNfbXCHsEi0lj224gmxI10kao3mbjNxm4zQCRRkTkeUnxZ7bZiFlcFrlhYx8eCk3mc85hzDcZzBrK4LnMaigxqCOfBSbkzlj2hCk34q5z/AAF/njTTDlEjfZvs32brN1m6xLcy/wDjQVJd+wjbSWYhIqOTwoLuuNCwxj7YQUDG24waF54JLNuOhsG4IIgowa1BaysbXLhFnl+UdcNRRjmlHuDWljmhCE3469z4rcF3njdgTDWf/NgRzvhI5ZWwn1nkQQb9xOeNKwyZGM1XFb54fFx3uKRFiI9DBjShaysLHLhlvlglWeKW+wW6GlW+JXPjI4EJ+Av8+K3Bd541JZYKFjcG8N6b03gkLb3/APFUrbyHsbMmJTApIlDYmxKgTN8Ik7rjUm5Kl49AIduGzz/DXOKRFqwj8GDGlCElHacMt8iRDA3UbqN1G6jdRCLThbJeAk/AV3nxWYLvPFlZB6qOWcs5ZyzZQx4EkNtT/iTOPX8DkJkIVNZ8KE3GtLHNCFLXO5dq2HSEaVwSLzwqJxtLYLw0tWPzCwY0oW7LThFnl+SMnwGNtgAxoeH7jjm9ziazBO/8a168O+/4c8JEvMjBzjnHOOYcwSqdmeEFfTgUuuga0sc0Ij74NSX6tg3kFpKxi2DXlGsNhmwzZZtMnsJCYkRJcERauD5BYTwizywUrIIaiOojqI6iOoWrM4JvISMfYWkLBaD3h4fEPgqOmDnlCM2Ntm2zdCMg15fCiFMSR1ENZDWQ1kNZDWNC+R9MOuf8OiLYK5v4cSVaeY1mgThyiNeEGEGzS7jHhC134GpL9Wwe2wtJWL2+yNV1x2BG6OGJFq4Ze6iCOAWeX4F9zBmwM8HvohCwuBaQxzQ8PgHjIoK7UhqOJJuw5k6ULGzz/AmeQ1ToQkU/4ewjaRbjavI2EIVsGryNgSrLigjoR0Eo4GjNkbLhS2SLhavIhpxw0NgSjFo8iGhsGwbBsGwbBHTBkNCGglHE0dyGhDThQ7o2xtjbGwNsJVlwodzaRtI2htI2htDYCVZf+0OH/qZ/FAlDyvTrHJfIS0ieDlVNIgUlv6E67JbWRzZXK6QNT98HyNWNQm5eY+ZOHIp05wUSmajRyWUM6garCfs4JpilfIsFkhIelpxUYy6uCM28iy9CfdkdTLsShTeKjxyidNvMEJkpjoDioxh6cFYsa7Rc7YkKHtcsLSU5KqRcaeQTSXsigIngJVNOYQJAUTYZtJlArNyh2wUVNJWD04GgjTO5KCUklfDw1aC2acGwXFR55ZHWw1vKBuR1DgosNMFTWV8AiwWn/ObeSH/SfUx6T3Nl78H2nFcFPYplaHojlBCnVD2tBVz4LLchqCtDwdnjyaZwNspYX+aFEqjZDtnMzvXg34H9GQjhXwymnyL7/wDRmgrPCzzOyMuIlzke2Q0KjBzKIxJ2JaEoKIdXGKSpO24KxY/N8HbH1cxgT1cMvc+qoSrpynJ2whrlArRe0OUEqWV1h2D4N3mLvfg7JYduyzow787TDsj7myxSizUfT/Rw6CyxRVMvEnYC03uLSe4v6xf1C/5tcgOXEKYbkcXQEq2zJZpSxDqmh6Tqj5sBMmZKFDe7C/zQvOmbbEjeQ7Viz7BVOyxzVWweH7fItFm2yEnqWeZ2QpzZkpSW7j12QlPXHJT0OxO8Q1B1oI7bG4Wsfm+Dtjtvk8hGHfJmkKsdsMhXDPCHhDbZQYyYdg+Bd1wA7bDchCeoM5hFwSNiFh2XBiXu5uBNVOX/ANhouiloXFo7jblLeLgqzCcU0NSbU2pbVA1JbUYV5hOF4UmxNiJQKuUiEhYNHcb8pbkWDUllRhbUiEhY3S1jYUiUCUh1FUpGF5UiUEF4UtikYNFpUYtjmK421IihY31SbcsCjFCQxVqjFvyG1Ksk9QuQlH/4an//2gAIAQEDAT8Q/wDr3F0sfaqIpb/wGgloRLQpd3Dppc6jWewioSSWlE+voCg1vsP6hFcrCLFgh3RWK2mQ2gZSaWKVifXUlB6A3jsH1UBJCRhFPvH+wf1zIfl2wSQkj6qloMY7MofQJ9byIquhT/kFbodxVR1wWrYklmyY8YfsYX2IiiyxCeeP0KTJTzwvy6lbodynfIE0t0J9ZyIJIRPQnc9xW+pjNfQFWOuUrbBnFDH/ADlrf4QbPsUeFyvKoYCCnuEEtKJ9XyIVWZ6uw33EiqVNMiCmGavSJ3lSu+bFrIwq5Psi8KtAsIOyWeOiRvKndcmSKvm1mDU0aFVUvTI+sqIora5CHVerZKdfQN47B78IshIJIZ13Jpe5v0Jsm3mxQ4NUirGbzBc0LFqREcZZkMiGm5H+u2CCEkdVVsOY7Mocw9BP1TItq6ZlI+YVuh3F/ezwQtiSV2yeRvbP2TP7goYsaEpZc3mTQx83zlyIXyEMsmyRPC5EhrEGra3foQGJHZqqwV0dSv0CifIFFXT1OlmBElKQ2nuN2erwknOSKwysaNhKIxvGOkupmG6rCSlqZVI4ury4fYb4ILkQkRLbsZE8xqeFLP05CF5Y7EyMr9nqNJ7j6KtxJLSvUaEllBra5H1kIrFbsJRbBT7CJvlS75sWstw22EySArVAhBY1uNIh6q4WfpfDcILmNVY5Waja9dTIWREfvw3HoIbmD4Yk93vgidxNVL0ywBRKmuQpJXp9lGnYRGuwdU4UwkJZEkK6dyaVvfqBg2y2JcU4qEQXs+QcGS13h9Xnhel7th5uQgWFafxDct8bUkBCasQKvtdSNVO5IlhJGqoM4y1FAfIYn6cV52SzJj5Yyx9xdCdcxDQgiu3Qm6z2kk7CUcbc5JvmsU53pdiWcQ3sfI8HBZPdal0OYUDCd+FjUk07EaqWmwoJI80MtYyYFAAplumfplVRIe8gecBUeo8G4qTHJlbqzpgLZ+EUy5yEeoCvwTiKVFoyW9Rr2O94IsfW/ATxcJsLL9wMohugOont+BzJFTza4j+TO3uThU43Bp4CDNCmZF6VRUz3osipp8EVGt2GgTFV7QuUE9gS/Ez+Fa90Sa2ZGZkUTmbJj1Ofc73gi19L8FPBw5ZROX+wSnRKJt+JiJ5gFVvUvhUKqrdinJEB8ANNfSfasXDIqBRRElGN3fJE6rvH6GbLS2LBfhTGy0dV0oSLyInIZ3hdxkTPBxV9Tn+RodskNEHtp9SRRr3XNDYibToykjt16T7VjVDewhh/uqX5iWC454X9x4R3/GGriWPrfgp4OOvoc/yPBobaoWFQP7DGoO3XpPtX4Lw3sIY+g1/P3rwjuPEEWPrfgh4uOvoc/wA/3mpNEP7DGoOzXpPvXgsY1HJDoPoNfz9y8I7zh3uIMtfS/ADwcOylj6X/AD/eakj+wxqDsF6T7l4HoxqLkNn2Gv5+8eEP73Dv+ALH1vi4njjY5H2Of5/rNSR/YZYOwXpPuXgtY9FyGzvHn8/cPCHKUHKq+knejYj7HPgp4poHLszth9jn+fs3kTsN7DLB2j0n3rwXh6LkNncPPAvxv7jwhsCu7zgi39L8EPBPuchSPpc8Z/I3tvImNVyZYO0ek+9eB6Mai5DZ2DmKg95UP8tMIlfg7pg93hdiW/pcnEHin0NsMViQc40/No/qsewAYTG9hjUHaPSfcvA9GNRFhbMlsH6c8hFKk9VQJIfPZbnkYLiVcKZLGD6JHvQrDXt2kY0/ul2JbAsHA8M+1sNuKouSaLCeaT6wVJ/hZyCfUop3K4kv7n3kMhV+2FyRvYZYO0ek+5eB6Mei5DHdvJJu0IRY5ksqfYSVUOYj3y4fdxEoUwKd0JI27cDDe6NiGp4BTwjxfGPTTZHt3LE0JPkFG3osWIdq8DSHi4jYPZtohaSaSWYh40LD7TUkf2GPQdg9J9y8FrLVg7t54e/xVC2Ce9WPY5zfomBXgriboopafdH1K6Emr78DPoNzuS7Es8Ao/aPH8cM6ezJllIqMrdKU1kPI+J7nslLe5WQLkFB6IIgbVDZrSXGPbvJI1HyLHI7V6T7l4Gox6IbO7eeJH3F0Hpp2kQah7x3unG4TvS/GfgpTxh6eXxxIylU5hBJeFp1HeQfsKWqNrEqDsCeLs3kksfIajkdu9J9w8FrHohs7t5xcSW2PDhpjzsgJ6K5Hse8gsSAD2IXf3EEHJV6DibNxZjGIhq64WqUfqZ3ZfiWfpfgJ4Q242kewxONMXUO5ULDY7UHaLqCTosQz6DHWTqqhPXXrUVvn3EYj3y9xlikeN715gY1HyLB270n3rwPRjURIyeM3nCYlqbNWrUzsAhXSCbfCxQgR07Am60XQxjBVjYDngh4QO7D950DzKwU488fst8UE3EwDa+R5+B7opN+7DdZAviCIXiR2wO9T6TTgfXNSx1CQRwkWQ/UMqYbbo3qF6Z5ww1GPQdu9J948FrGohi5U5yHnRKldw69sBJsqsKgX4A0NDLQ7DkVQz8ExoMoo93hCkblYO/8AcJz1XmJlJrmv0Jde8uVkjzeElr7Xxe0tD1Ijn+QmBVNg8d825M0Sv9KkuaCnIG9LMeu4Em9CeT7TTh54HSuMmmwSXG9t5JGoxqDs3pPvHgsZYh5ndvJGIAgiNcKDILQOFHwXJMwyKQIwIVXAVpJNy82SRIPAmI/t6cP1W/CoucOWDWJEIkcW1GBzUXQ1ojoZpzhZ+DIGrcJRaLckGjG1x+WyeSHu2q3h3KwajLR270n3zwZi1Yd24Z0+s0f+iI+rceDXSJbyJ3cdgixFOg94ESQTQLjzoL7idQUiIKMzBTLyriBcnJgk26DlEra9xtDUCP0bj4KQIIVtWCTeJSVifENi2aVOZHUN6qw92VXF0gkpKXMmVUfOEidCsJnMvxwXKHQ5HcDLWWjt3pPvngsZYiTthkZeTY7vCxRtaB7zNBMSV2UGbmKab2iJ0RcgUvI/VGJUX7dSp/2O2L/J9hBlO5g85/hiAtNu/gQWQZFuOLJ9GyiFp92+DBuXS9nkxf8AmEmgbY+OPlFtI6AffsUqZD2poK4RbhFam2WorTZsy+sa2Q+/2Nf8IdauoUcaPBQUXMbLWWDt3pPungsZYuQ2Sm1KFuewpHvFVSeRoDZkdv2hGYax00AvHIfILIFrZ0wHjSZdssGrxnIGSrz4Znk80fBevhBPCl3mBD2lvDGhZhPYeWJD28BRuL6CbK2aHOxBT+edjLlohlznDvFhaywdm9J988FjLFh37Fl6C1S2dRthToJrZKQ1pThmttXOCNJwTkQoOoyXr5DWKUld9of6Q3SokKISPNVxsqlAmTfh2HWE6mWHjkRtkIYFKWbMUV2Q613kPg7xDLGWo7V6T7p4LGWLDu3ngZ1QbxqjQf6zYKqcebGx2m4vp3CX9IJZd2B1EA0GavUr61GYkSD0XPiIWBjooMsR/LtmQzy9VULCMk5CL2CFKGXNsGQLoc7rGhRE5DWaGDWhJLtuP0F8ydZ2exTQ0dgzzgarToCihzgPKhwd8vIyxlo7B6T754LWWLDu2FgrnsJB5TszEn8kKOo5n+hM94xLNuosYNSpZyUDGI24JCKmmhfl1G7u54GWMYmOrfrE5z9Q+8OZJn1dAU21CUCVVLuYsS1ZEUdfcMpCR1zGktEiGFkXyEJLfGeDUSvyg5hIeHcLzhY+RYOxek++eCxliwT3R3gL+xMl9XgUcjqDnlpak4yX+QSHN4HszvLqIS11zLP120+BujGXFawkKf8AWp9ne5BD3D3KL0V/caSZvUqQUobpMUJsaDGrZ/RFcdObP8CcWP8AeAnV+B/pEJQ3XnCx8sLsXpPungzlqwoKo9RlvUPjTcT02YjqwEjhzEL/AKEpdn7FNz54VEu/MF/xoXQSWVhSBDc4yu18N91LQY/fRHLyPkrEbYa/A0khjFmCdo7wyxlp2D0n3zwZi1ckQM4Xq/DRdeFH+EMeCGsuHrULJkWaoyDbyrPc6u5VghEGLrCD4Iw0g0UXAjM5vshd5Rq9RifLXZI4kiyTYThhsKxzX6HUa2RUyTe4lagNY3aOFXC1QxKPkWnYPSfdPGGxyQhDTXXBSf4OmA0JP7dRIzsEEtC5cDblVkS4L3sOyjpE+fEQlNgbuefB0aNlxWDK6yFu72KeLQ9vjQSms8SP9EhD3s8KD5Fh2r0mjaFdt4FccbczPYZQU41BYVZc4fewWI4JxgNTCQnsdUOotRuP8tFRr5hJEGc0Ggpax7jq7VBrhSkRa/ENjWw/AxkyGrFlX1RACDzzx/wIK++eNCFCb2BmewitRsoGrkNJK9JtEMn0sa6kr8eH0NFF+x3FczbZiDRIalHtRZFADinD0Ch1wgK6tzLi9KeC+nM+BkdtzI/wkDFohrLgnx0W6vUrDrNX+fknxFaZ+z/SCUJQsBBY2zP9giXcgC17PO5upHpWBRPJiqvZiTSxqG0PQUUmC6gEg2RCGGuBCEZNgkmocJxNtWEIa4XfQNDlLfgyqYREjuYG+x72Ng/xNIJbHOKBhiTYgZoRak1EvJZbKkhVUghL0xBIoiST+bdD4cxn6wBAc2FVVVaiIJU9xJ81V/bikbDbcyJ9pEq7OGdtPcEVaz3RFCXJEvRD6h99V/CiN63d0EkVOpjFEvJEpzAdLBkfAgDo78n7EpCohL02xmUZkxNYn2oTjhdE6hRJ23hBWEtsZ+aHChxSucLpQbTGjwomNU4Qdafg99EQTjdfGDRR52xkxpEqpWG9HyIyiMl6gZF7uzRJ+DP2NNos1hZkszP3ewhwQ6omGbWY/VmfCrTiEFJoMlWzfqNYrdznUIEmmzKTMhBtxcTm5nkupDcsyfsSUJU0IF8/MfQnfk2KXUyH5X9UKUu+b9SMrXuF11LE+5YqAENUVCrQGwkQ6aDGSbO/4ZNBoPhjNhzCZKT5q3MVRGKZZ8SU4zJEsO6fliMoqyQyMUGSVzbkiWzUgGARJ+5XTQXqdyJrnSsyEbbAY0ScKSU5QiqHvmSHKQ5oajgb1TmG+QZzyP24mNCUsheV5iNNb5kC1bISzJb7B74O6BU/YR3XrIULeq3RJl06k7IardCe99xre17f4Rbc1+xISFk7Hv8A6VR/XdB4r7yMyjL6n8GgyN4upFIPI3TQYyXSf2KsYeJv9J59JEqdhbq8yGJGSUC9XQLoTvkpAkaCH6qe9AusIOUyW+VEEo5ZCME4I+0UIkqR65CC+NCSVFh7IC5I9EuRpJCURETid/WfTiW5Tv3hc0VUCI5exuR/7XysHhZmTJ1stVug0PqyeEq7skQjZaPli4sjJYRqrvnyRKr3tyqkFGfeHyRfjme/rZqTpDVnzQ/v6Nip3PYe2FBJHmsIV0L2e39iEFO+DMkjNk6qWu3QlndqNvdbEQvcZckJR65WOAeTJ5/0OhM+3kmHhD2qnZ8mJzg3BI9Os6n6xhIaxHeFv2JFAWi9euqu8TrYahkadZMjWfYoxOCe4SX0K7ERpmhFt2F+ouK7RH/gCBV8sxNfPIh2I/54dRPM/wDwI0P3Kx9RH/w6W6lq4P6SHUJj5onitQuZ/UE/9gnPChJbg/rG39xOa8FvFzY15DZGzNkbITchfCZPA0hqmtz+oLZaVxUJC5s/rC1lOVjS0I2/uf1D+of1D+of3D+4OYQ3iwhomtza+5S0jFw0NCP7w/hD64xUCnU/qFYZPitRzM/oCCUcnBJax1R/eR/eR/eR/SP6R/eE79hP/GgGuTZa/ZIxk1dENkUTfhY4KuQazJiFM2gKWL0yB7pkWEkdBCwbGGfCzDbnLJJJxkrLQOfoHrwP7xJ3kQgMlPhf6tSTz/OLUCSSeEO5Y/cJFbtJDQ60MQsOiX4NcZEPJJbI0VFbi7xg92B5+qy4np18OGO0hh0CQ9xJOJOB/fRYv+NWzLXLPD/SqMgp0f240Q5TIS7rBE5PpmwNVhGkMiwsI5IjGBL2XXBfbYj9C4G7n/OIk72413cVxqkyN+Fivv4zLNYJDJROLfVqSeT5xsBscU5G8N0buBN0LbnK4FrCzuMdsoaJQ0NCmHRLkm4FkNvDYgIqzWDXZGPykn3tlxW9ZPBDlkXXB022BGf3ODGL6yFSwEo/4qFbUSGZDbkFoVaELRlfcoTb54QjMt8b0uUyEXyMSGLlZM0EllhlnJC4OaAmbIeXExOZgTJn7Yv7o1VzGorbVVhMLM1wKH+rUk8zziwJG+m/BJPCxCSqIPdohoSGQ0Jao5RwqNiUi5qJrvhfzJPrbLi7ljfAHaskrvdJPFP/ABo292v9wpxSjnzeC8pVbccHDuh+U2TYWias+NoRKZd86YIX2aI4fpbPC/7Z8faLDtcW90aqFnlIY75haEnvkWpPzD7W5J53ngCRbDUkbg3GEbj3wB7JLa4ksqiDUUGMUmZqBu74r+sk+1suLvWN8ENhK19MHPLQJS4YkDtX8xbKk30Cc/8AEsNIXgPrsTJA83ZEGkmp/YP7A7HpaWv+iK6aPL/BcUSVXshjGS2ISGNGe4lTaU+H7Wzwv6fnj7BYdrj3P6GqjskNSPlZzEnuwWp7sFofU3GzzvOL4AtsUPiiIiGO7pwwFYymbJxviuT1Fw/KSfS2XF3LJ4aNJJO+grZnY+h/4PQ93+G17v8ADY93+D/2BnVDWBrjv/xCEdavESwzxBaK4DI0qvZDAyWxaRLZH0lg97njg5q1zIRISnwSLT4PCLWJduJnJOEStse9/Qro7JYNSX04CT1EZyXyY2eV54ITOz+fxNFSRJTNkmgkuxAhEWY+KJJofXIJ8C+eC4tPguLuWEDvVvxqTs4+GDf8MKadN2PYyXUxqzN12Qv7j7mfUz7mfc8cMlZT+kLGJKpbRzGhktikqWxNSr3eC0h2GN/Dg01a6JESnjrJEroNCQ+GhqV/kz7y/Yv437PpL9j/AJ37I0RbsY7bzHpc3BBNEse9/RcjtFi0Xl/TIbHg8rzwwxzMfeR9ZH1kfWR9ZEoi1SLBuCrbTPVg0gt2KSISwgDvkyBGFp4J40Fnkk183Rkdyaf6Ptr9n21+z6C/ZmHrjXjzu6++KFvUcD/3kf1Ef3Ef3Ef3Ef3EZBvctSSsJHpbzz/wmf0SZD0KUaG3EtlINB/A5UkoXnOfPBVxbsOEja7Exctkiu93wLSGN+usNUNdCEyU8IHjMuKOxYLhaQ1naFacCvqlRUOwXAyuVX3BtoJtDyvOKgaIIIIIOgyzgaKj26hrhpxuxATCXB7GHoOqeuuFr7mQsFOZSnRjaA23KMZJwshsVFBWNRI4GZBGxHBYGfQTh52JVIoSt/wmfykfwkJWcdWaPofyhDCQMbS0fQ2vshlKRdOJyubb2Nt7CaFRcF4SY2foP5BtPY23sbD2ErJ7FoUcNWaPoLR+3G23X2HpfYVQqY3RGbP2Nr7G19ja+yNr7I2vsja+yEuye2CSbf2Nn7C6Eo4WWQmbf2Nn7CXBY19D+Mfzj+cfwhf5xZxC4KCifM/nI/nI/mI/nI/mI/mI/iIsSLp/7PpgTmzFgxozJxniknjknhkiruBPhYsXtuEI9VgycJ4mycZJxnGcZxnjX/ausKdRMaB1jCOgXYpzOEqt8j739yuAKZokNbpbDEEjVGtchhJt23LDdk4HjrjPUfGoFUIA/UPtku2AcwrrxHfwz/cTYcdcISiZh7+xfSyIOrQ/E0LDDJKn1YhyhJLGT/H3ZWcAFHI51RUY2qNMLzwojwgAZj208mOIltZeN87ZY1WzqjoPLXdoMbIaSh9UQ9mfeQlRjsxbJnk6Dmndp4GfvQZOrYDqWT1ICBcSkycyTYU5nPOtkN7UqqIWd8j1wZVZuJWCjMlIhnM0yUbD3iGmhkhsGr4S9VLDm3VtTUpTuPUQzmbkBAiN8xhUuOY3fcgUG4X/ADV8zqZBH0D0n3ywJYh6QZV/IOy5s8GJRNnoztuwfQhzICw1TQYxZgRn2YJRdpEX9wEFInMEl3mP5P8AcJIwgpFZD+s+p/o4FiNG59rqOT3M+z/B8iA5CJaqI0/2C6VLVt74dtPqbsZpug+7CIpBbUIqHrJfAxlQzHU7wJTln0XP323+kq5+J2PG+dssXN2bwdkvAvN8owKpVfBPsdq8DiImqejRWf2z5BBYO6NB4fUaHafOP3muP0d3Ba3fYO4HYcY7xiO2oU9TYjLUsDFp1g2Btxf7mDH0H4Mwq+9jPIg7d1H/ABoIwgjG4gKmwu+ZHZ1YFXVKLkVCErT6i8wmQxUWg7ZdnMav1iwRlpTmdv24tFe/NiBlI1OHobaTRU+n0YoDmkzC9VYzfgk5OQsf8MQvsia6ie1PobssqJDP0zk+GIvmjMoApCGrOrO8C/QyYkrk9HqO3mNhnY+Bdhwc3tjtngLVzn6LhjT4l0H9l4KuyFNjMj7i3axUWhUUNlh9xodh84MQRYJ92jOx4b2S9ydt9pRQm/SByP6pYhZZS9sY7h4WDF8ypwqmWFcUcEf81DuX8dCxzoJQMUwia3GUv2jtgLgeuyZjMjBXCTRn8w/mCCFJoqCUaalMnIZXhDR1ATBA3lbbo/kI/gISiSolYVwpNxIRCWSwWwia3HEv2jweCQlGnVMlUmWhBGJMNVIkIhKy4B2OMDDC0oQkKyHBEHdMXQE0WDZNbLVCKENHcuc6FXU6ChhJRkxHK8LGS1aZxUjBQklFqLEiErLG2fMirPaKarkWLwiU7oXQpNFgyrP2h/4gySJrOPUKlh2LBf8A4an/2Q==";

/*
 * 
 *  AXONEXUS SIGNAL v3  Immersive Telecom Audit Interface
 *  TUO OSIPTEL + Ley 29571 | Per
 *  Particle mesh + Glassmorphism + Radar scan + Lucide icons
 * 
 */

//  Config 
const TASA_A = 0.04;
const TASA_M = Math.pow(1 + TASA_A, 1 / 12) - 1;

const CK = [
  { id: 1, label: "Solicitud de afiliacin con constancia", art: "118-A (i)" },
  { id: 2, label: "SMS informativo: servicio, frecuencia, tarifa + opcin ACEPTO", art: "118-A (ii)" },
  { id: 3, label: "SMS de confirmacin con palabra ACEPTO desde la lnea", art: "118-A (iii)" },
  { id: 4, label: "SMS de bienvenida con descripcin y comando SALIR", art: "118-A (iv)" },
];

/*
 * 
 *  MOTOR DE ANLISIS INTELIGENTE v2
 *  Parsea la ESTRUCTURA del recibo, NO busca palabras sueltas.
 *  Clasifica cada concepto facturado contra Art. 32 TUO.
 * 
 */

// Conceptos LEGTIMOS segn Art. 32 TUO (lista taxativa)
const CONCEPTOS_LEGIT = [
  // (i) Tarifa o renta fija
  /plan\s+(adicional|control|postpago|ilimitado|basico|datos|voz)/i,
  /cargo\s*(fijo|mensual)/i, /renta\s*(fija|mensual|basica)/i,
  /linea\s+adic/i, /paquete\s+datos/i,
  // (ii) Instalacin / acceso
  /instalaci[o]n/i, /acceso/i, /activaci[o]n/i,
  // (iii) Consumos
  /consumo/i, /llamada/i, /minutos/i, /sms\s+enviado/i,
  /datos\s+(adicional|consumido)/i, /roaming/i, /larga\s+distancia/i,
  /kb\s+(internet|multimedia|transmisi)/i,
  // (vii) Equipo terminal
  /equipo/i, /terminal/i, /cuota.*equipo/i, /financiamiento/i,
  // (ix) Descuentos / devoluciones / bonificaciones
  /descuento/i, /devoluci[o]n/i, /bonificaci[o]n/i, /compensaci[o]n/i,
  // Redondeo
  /redondeo/i,
  // (viii) Deuda
  /deuda\s+pasada/i, /d[e]bito/i, /saldo/i,
  // (xi) Intereses
  /inter[e]s/i, /mora/i,
  // Reconexin (legtimo si aplica)
  /reconexi[o]n/i, /reactivaci[o]n/i,
  // Resumen / Totales (no son cargos, son etiquetas)
  /total\s+(a\s+pagar|facturado)/i, /subtotal/i, /igv/i,
  /cargos?\s+mensual/i, /precio\s+de\s+vta/i,
];

// Conceptos VAS / terceros  requieren Art. 118-A
const VAS_PATTERNS = [
  /suscripci[o]n/i, /servicio\s+de\s+contenido/i, /contenido\s+premium/i,
  /entretenimiento/i, /alertas?\s+(sms|premium)/i, /juegos/i,
  /hor[o]scopo/i, /trivias?/i, /ringtone/i, /wallpaper/i,
  /club\s+(sms|premium|vip)/i, /zona\s+premium/i,
  /sorteo/i, /concurso/i, /adulto/i,
  /streaming\s+premium/i, /video\s+premium/i,
  /sms\s+premium/i, /mensaje\s+premium/i,
  /tarifa\s+premium/i, /cobro\s+adicional\s+tercero/i,
  /valor\s+a[n]adido/i,
];

// Seguros / servicios no-telecom  NO permitidos en recibo Art. 32
const NO_TELECOM = [
  /seguro\s+(de\s+)?(?!.*equipo)(vida|salud|vehic|hogar|movil|celular|accidente|cancer)/i,
  /protecci[o]n\s+(movil|celular|premium)/i,
  /asistencia\s+(vial|hogar|medica|legal)/i,
  /garant[i]a\s+extendida/i,
  /cobertura\s+(accident|vida|salud)/i,
  /seguro\s+oncol[o]gico/i,
  /club\s+de\s+beneficios/i,
  /afp\s+/i, /clinica/i,
];

// Secciones INFORMATIVAS del recibo que NO son cargos
const SECTION_INFO = [
  /conceptos?\s+facturables/i, /lugar(es)?\s+de\s+pago/i,
  /qu[e]\s+es\s+el\s+recibo/i, /mayor\s+informaci[o]n/i,
  /bancos?\s+y\s+agentes/i, /realiza\s+tu/i, /recuerda\s+que/i,
  /dbito\s+automtico/i, /es\s+r[a]pido.*seguro/i,
  /ahorra/i, /paga\s+tu\s+recibo/i, /forma\s+digital/i,
  /evita\s+comisiones/i, /puedes\s+pagar/i,
  /servicio\s+gratuito\s+que\s+ofrece/i,
  /cargo\s+(mensual\s+)?facturado\s+al\s+cliente\s+por/i,
  /cargos?\s+por\s+(tr[a]fico|llamada)/i,
  /navegaci[o]n\s+en\s+internet/i, /env[i]o\s+y\s+recepci[o]n/i,
  /larga\s+distancia.*cargo/i, /roaming.*cargo/i,
  /cargo\s+facturado\s+si/i, /renta\s+fraccionaria/i,
  /fullcarga/i, /scotiabank/i, /interbank/i, /multibanco/i,
  /kasnet/i, /western\s+union/i, /wong/i, /metro/i,
  /bbva/i, /bcp(?!\d)/i, /banbif/i, /pichincha/i,
  /correo\s+electr[o]nico/i, /pdf\s+al/i,
  /presenciales.*comisi/i, /d[e]bito\s+autom/i,
  /Integratel\s+Per[u]/i, /R\.U\.C\./i, /P[a]gina\s+\d/i,
];

//  Extract line items with amounts from recibo text 
function extractLineItems(txt) {
  const items = [];
  const lines = txt.split(/\n/);
  // Match lines with amounts: concept followed by S/ or just numbers with decimals
  const amountRe = /S\/\s*-?[\d,]+\.?\d{0,2}|(?:^|\s)-?[\d,]+\.\d{2}(?:\s|$)/g;

  for (let li = 0; li < lines.length; li++) {
    const line = lines[li].trim();
    if (!line || line.length < 5) continue;

    // Skip info sections
    let isInfo = false;
    for (const pat of SECTION_INFO) {
      if (pat.test(line)) { isInfo = true; break; }
    }
    if (isInfo) continue;

    // Find amounts in line
    const amounts = [];
    let m;
    const lineForAmounts = line;
    const re = /S\/\s*(-?[\d,]+\.?\d{0,2})|(?:^|\s)(-?[\d,]+\.\d{2})(?:\s|$)/g;
    while ((m = re.exec(lineForAmounts)) !== null) {
      const val = parseFloat((m[1] || m[2]).replace(/,/g, ""));
      if (!isNaN(val)) amounts.push(val);
    }

    if (amounts.length > 0) {
      // The last amount is typically the total for that line
      const total = amounts[amounts.length - 1];
      const concept = line.replace(/S\/\s*-?[\d,]+\.?\d{0,2}/g, "").replace(/\s{2,}/g, " ").trim();
      if (concept.length > 3) {
        items.push({ concept, total, line: line.substring(0, 160), lineNum: li + 1 });
      }
    }
  }
  return items;
}

//  Detect operator 
function detectOperator(txt) {
  const lo = txt.toLowerCase();
  if (lo.includes("movistar") || lo.includes("integratel")) return "Movistar";
  if (lo.includes("claro") || lo.includes("am[e]rica m[o]vil")) return "Claro";
  if (lo.includes("entel")) return "Entel";
  if (lo.includes("bitel")) return "Bitel";
  return "Operadora";
}

//  Extract key receipt data 
function extractReciboData(txt) {
  const data = {};
  // Total
  let m = txt.match(/Total\s+a\s+pagar\s*S\/\s*([\d,.]+)/i);
  if (m) data.total = parseFloat(m[1].replace(/,/g, ""));
  // Subscriber
  m = txt.match(/([A-Z]{2,}\s+[A-Z]{2,}\s+[A-Z]{2,}(?:\s+[A-Z]{2,})?)\s*\n?\s*DNI/);
  if (m) data.nombre = m[1].trim();
  // DNI
  m = txt.match(/DNI[:\s]*(\d{8})/);
  if (m) data.dni = m[1];
  // Phone
  m = txt.match(/Tel[e]fonos?\s+asociados?[:\s]*(9\d{8})/i);
  if (m) data.telefono = m[1];
  // Billing period
  m = txt.match(/Ciclo\s+de\s+facturaci[o]n\s*[-]?\s*(\w+\s+\d{4})/i);
  if (m) data.periodo = m[1];
  // Receipt number
  m = txt.match(/N[]?\s*([A-Z0-9]{4}-\d{10})/);
  if (m) data.nroRecibo = m[1];
  // Operator
  data.operadora = detectOperator(txt);
  return data;
}

//  MAIN SCANNER: Intelligent structural analysis 
function scanRecibo(txt) {
  const hallazgos = [];
  const lineItems = extractLineItems(txt);
  const reciboData = extractReciboData(txt);
  const lo = txt.toLowerCase();

  // 1. Classify each line item
  for (const item of lineItems) {
    const c = item.concept;
    const clo = c.toLowerCase();

    // Skip zero-amount items and summary labels
    if (item.total === 0 && !/bonificaci|descuento|devoluci/i.test(c)) continue;
    if (/^(subtotal|total|igv|precio\s+de\s+vta)$/i.test(c.trim())) continue;

    // Check if it's a legit telecom concept
    let isLegit = false;
    for (const pat of CONCEPTOS_LEGIT) {
      if (pat.test(c)) { isLegit = true; break; }
    }
    if (isLegit) continue;

    // Check VAS patterns (HIGH risk  requires Art. 118-A compliance)
    let isVAS = false;
    for (const pat of VAS_PATTERNS) {
      if (pat.test(c)) { isVAS = true; break; }
    }
    if (isVAS) {
      hallazgos.push({
        tipo: "VAS",
        kw: c.substring(0, 50),
        monto: item.total,
        ctx: item.line,
        norma: "Art. 118-A TUO  Requiere doble marcacin (solicitud + ACEPTO + bienvenida). Sin estos 4 registros  nulidad del cobro.",
        risk: "alto",
        accion: `Exigir a ${reciboData.operadora} los 4 registros del Art. 118-A. Sin prueba = devolucin S/ ${Math.abs(item.total).toFixed(2)} + inters legal.`,
      });
      continue;
    }

    // Check non-telecom charges (CRITICAL  not permitted in recibo per Art. 32)
    let isNoTelecom = false;
    for (const pat of NO_TELECOM) {
      if (pat.test(c)) { isNoTelecom = true; break; }
    }
    if (isNoTelecom) {
      hallazgos.push({
        tipo: "NO TELECOM",
        kw: c.substring(0, 50),
        monto: item.total,
        ctx: item.line,
        norma: "Art. 32 TUO  Lista taxativa de conceptos facturables. Seguros/asistencias NO son servicios de telecomunicaciones.",
        risk: "alto",
        accion: `Concepto prohibido en recibo telecom. Reclamar devolucin inmediata de S/ ${Math.abs(item.total).toFixed(2)} + inters legal.`,
      });
      continue;
    }

    // Check for suspicious short numbers (4-5 digits in billing context)
    const shortM = c.match(/\b(\d{4,5})\b/);
    if (shortM && !["2020","2021","2022","2023","2024","2025","2026","2027"].includes(shortM[1])) {
      const num = parseInt(shortM[1]);
      // Only flag if it looks like a short code (not a year, not a regular amount)
      if (num >= 1000 && num <= 99999 && !/pago|recibo|factur|cd|cod|cuenta|ruc|dni/i.test(c)) {
        hallazgos.push({
          tipo: "N CORTO",
          kw: shortM[1],
          monto: item.total,
          ctx: item.line,
          norma: "Art. 118-A TUO  Nmero corto de servicio de contenido. Debe estar identificado en el recibo con descripcin del servicio.",
          risk: "medio",
          accion: `Verificar si el nmero corto ${shortM[1]} corresponde a un servicio VAS. Si no hay registro de ACEPTO  nulidad.`,
        });
      }
    }
  }

  // 2. Global text analysis (catch things line-item parsing might miss)
  // Only check in the BILLING section (before "Conceptos facturables" or "Lugares de pago")
  const billingEnd = lo.indexOf("conceptos facturables");
  const billingTxt = billingEnd > 0 ? txt.substring(0, billingEnd) : txt;
  const billingLo = billingTxt.toLowerCase();

  // Check for "servicio de contenido" text with amount
  if (/servicio\s+de\s+contenido.*s\/\s*[\d.]+/i.test(billingLo)) {
    const m2 = billingLo.match(/servicio\s+de\s+contenido.*?s\/\s*([\d.]+)/i);
    if (m2 && !hallazgos.some(h => h.tipo === "VAS")) {
      hallazgos.push({
        tipo: "VAS",
        kw: "Servicio de contenido",
        monto: parseFloat(m2[1]),
        ctx: billingTxt.match(/.*servicio\s+de\s+contenido.*/i)?.[0]?.substring(0, 160) || "",
        norma: "Art. 118-A TUO  Servicio de contenido detectado en zona de facturacin.",
        risk: "alto",
        accion: "Exigir los 4 registros del Art. 118-A al operador.",
      });
    }
  }

  // 3. Return analysis
  return {
    hallazgos,
    reciboData,
    lineItems,
    resumen: {
      totalConceptos: lineItems.length,
      conceptosLimpios: lineItems.length - hallazgos.length,
      montoIndebido: hallazgos.reduce((s, h) => s + Math.abs(h.monto || 0), 0),
    },
  };
}

//  Dev calculation (unchanged) 
function calcDev(c, m) {
  let ca = 0, ia = 0; const d = [];
  for (let i = 1; i <= m; i++) { ca += c; const im = (ca + ia) * TASA_M; ia += im; d.push({ mes: i, cargo: c, ca, im, ia, tot: ca + ia }); }
  return { d, tc: ca, ti: ia, td: ca + ia };
}

function scanCalls(calls) {
  const inf = [];
  for (const c of calls) {
    if (!c.fecha || !c.hora) continue;
    const hd = parseInt(c.hora.split(":")[0]) + parseInt(c.hora.split(":")[1] || 0) / 60;
    if (hd >= 20 || hd < 7) inf.push({ ...c, inf: "Llamada fuera de horario (20:0007:00)", n: "Art. 62.b Ley 29571" });
    const ds = new Date(c.fecha).getDay();
    if (ds === 0 || ds === 6) inf.push({ ...c, inf: `Llamada en ${ds === 0 ? "domingo" : "sbado"}`, n: "Art. 62.b Ley 29571" });
  }
  return inf;
}

//  Kinetic Particle Mesh Background 
function ParticleMesh() {
  const ref = useRef(null);
  const mouse = useRef({ x: 0.5, y: 0.5 });

  useEffect(() => {
    const cv = ref.current;
    if (!cv) return;
    const ctx = cv.getContext("2d");
    let id, t = 0, frameCount = 0, lowPerf = false, perfCheckTime = 0;

    const isMobile = window.innerWidth < 768;
    const N = isMobile ? 20 : 50;
    const nodes = Array.from({ length: N }, () => ({
      x: Math.random(), y: Math.random(),
      bx: Math.random(), by: Math.random(),
      vx: (Math.random() - 0.5) * 0.0004,
      vy: (Math.random() - 0.5) * 0.0004,
      r: 1 + Math.random() * 2.5,
      ph: Math.random() * Math.PI * 2,
    }));

    const resize = () => {
      const dpr = isMobile ? 1 : Math.min(window.devicePixelRatio || 1, 2);
      cv.width = cv.offsetWidth * dpr;
      cv.height = cv.offsetHeight * dpr;
    };
    resize();
    window.addEventListener("resize", resize);

    const onMove = (e) => {
      const rect = cv.getBoundingClientRect();
      mouse.current = {
        x: (e.clientX - rect.left) / rect.width,
        y: (e.clientY - rect.top) / rect.height,
      };
    };
    window.addEventListener("mousemove", onMove);

    const draw = () => {
      t += 0.005;
      const W = cv.width, H = cv.height;
      const mx = mouse.current.x, my = mouse.current.y;

      // Deep gradient background
      const bg = ctx.createLinearGradient(0, 0, 0, H);
      bg.addColorStop(0, "#020202");
      bg.addColorStop(0.5, "#050505");
      bg.addColorStop(1, "#0a0a0a");
      ctx.fillStyle = bg;
      ctx.fillRect(0, 0, W, H);

      // Subtle grid
      ctx.strokeStyle = "rgba(0,255,200,0.012)";
      ctx.lineWidth = 0.5;
      for (let x = 0; x < W; x += 50) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke(); }
      for (let y = 0; y < H; y += 50) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke(); }

      // Signal waves
      for (let w = 0; w < 4; w++) {
        ctx.beginPath();
        ctx.strokeStyle = `rgba(0,255,${170 + w * 20},${0.018 + Math.sin(t + w) * 0.006})`;
        ctx.lineWidth = 0.8;
        const yBase = H * (0.2 + w * 0.2);
        for (let x = 0; x < W; x += 3) {
          const mouseInf = Math.sin((x / W - mx) * Math.PI * 2) * 8;
          const amp = 20 + w * 12 + mouseInf;
          const freq = 0.004 + w * 0.001;
          const y = yBase + Math.sin(x * freq + t * (0.6 + w * 0.15)) * amp
            + Math.sin(x * freq * 2.5 + t * 1.2) * (amp * 0.25);
          x === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
        }
        ctx.stroke();
      }

      // Update & draw nodes
      for (const n of nodes) {
        // Mouse attraction
        const dx = mx - n.x, dy = my - n.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 0.3) {
          n.vx += dx * 0.00003;
          n.vy += dy * 0.00003;
        }
        // Spring back to base
        n.vx += (n.bx - n.x) * 0.0001;
        n.vy += (n.by - n.y) * 0.0001;
        n.vx *= 0.99;
        n.vy *= 0.99;
        n.x += n.vx;
        n.y += n.vy;
      }

      // Connections
      for (let i = 0; i < N; i++) {
        for (let j = i + 1; j < N; j++) {
          const ddx = (nodes[i].x - nodes[j].x) * W;
          const ddy = (nodes[i].y - nodes[j].y) * H;
          const d = Math.sqrt(ddx * ddx + ddy * ddy);
          if (d < 180) {
            const a = (1 - d / 180) * 0.07;
            ctx.beginPath();
            ctx.strokeStyle = `rgba(0,255,190,${a})`;
            ctx.lineWidth = 0.6;
            ctx.moveTo(nodes[i].x * W, nodes[i].y * H);
            ctx.lineTo(nodes[j].x * W, nodes[j].y * H);
            ctx.stroke();
          }
        }
      }

      // Draw nodes with glow
      for (const n of nodes) {
        const pulse = Math.sin(t * 2.5 + n.ph) * 0.5 + 0.5;
        const px = n.x * W, py = n.y * H;

        // Outer glow
        const grd = ctx.createRadialGradient(px, py, 0, px, py, n.r * 6 + pulse * 4);
        grd.addColorStop(0, `rgba(0,255,200,${0.06 + pulse * 0.04})`);
        grd.addColorStop(1, "rgba(0,255,200,0)");
        ctx.fillStyle = grd;
        ctx.beginPath();
        ctx.arc(px, py, n.r * 6 + pulse * 4, 0, Math.PI * 2);
        ctx.fill();

        // Core
        ctx.beginPath();
        ctx.arc(px, py, n.r + pulse, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0,255,200,${0.3 + pulse * 0.3})`;
        ctx.fill();
      }

      // Scan beam
      const scanAngle = t * 0.8;
      const scanCx = W * 0.5, scanCy = H * 0.5;
      const scanLen = Math.max(W, H);
      const scanGrd = ctx.createLinearGradient(
        scanCx, scanCy,
        scanCx + Math.cos(scanAngle) * scanLen,
        scanCy + Math.sin(scanAngle) * scanLen
      );
      scanGrd.addColorStop(0, "rgba(0,255,200,0.015)");
      scanGrd.addColorStop(0.3, "rgba(0,255,200,0)");
      ctx.fillStyle = scanGrd;
      ctx.beginPath();
      ctx.moveTo(scanCx, scanCy);
      ctx.arc(scanCx, scanCy, scanLen, scanAngle - 0.15, scanAngle + 0.15);
      ctx.fill();

      id = requestAnimationFrame(draw);
    };
    draw();
    return () => { cancelAnimationFrame(id); window.removeEventListener("resize", resize); window.removeEventListener("mousemove", onMove); };
  }, []);

  return <canvas ref={ref} className="absolute inset-0 w-full h-full" />;
}

//  Multi-Phase Scan Animation 
function RadarScan({ active, onDone, aiPhase }) {
  const ref = useRef(null);
  const [phase, setPhase] = useState(0);
  const [logLines, setLogLines] = useState([]);
  const [step, setStep] = useState(0); // 0=local, 1=IA, 2=done

  const logs = useMemo(() => [
    "Inicializando protocolo OSIPTEL...",
    "Cargando Art. 118-A: Marcacin doble...",
    "Verificando registro de afiliacin...",
    "Buscando SMS-MT informativo...",
    "Verificando confirmacin ACEPTO...",
    "Verificando SMS de bienvenida...",
    "Contrastando Art. 32: Lista taxativa...",
    "Escaneando nmeros cortos (4-5 dgitos)...",
    "Verificando conceptos facturables...",
    "Anlisis de Art. 56.b: Consentimiento...",
    "Generando informe de hallazgos...",
    "Escaneo completo.",
  ], []);

  useEffect(() => {
    if (!active) return;
    setPhase(0); setLogLines([]); setStep(0);
    let p = 0;
    const iv = setInterval(() => {
      p += 2;
      setPhase(p);
      const logIdx = Math.floor((p / 100) * logs.length);
      setLogLines(prev => {
        if (logIdx < logs.length && (prev.length === 0 || prev[prev.length - 1] !== logs[logIdx])) {
          return [...prev.slice(-6), logs[logIdx]];
        }
        return prev;
      });
      if (p >= 100) { clearInterval(iv); setStep(1); setTimeout(onDone, 300); }
    }, 40);
    return () => clearInterval(iv);
  }, [active, onDone, logs]);

  useEffect(() => {
    if (!active || !ref.current) return;
    const cv = ref.current;
    const ctx = cv.getContext("2d");
    cv.width = 200; cv.height = 200;
    let id, t = 0;
    const draw = () => {
      t += 0.04;
      ctx.clearRect(0, 0, 200, 200);
      const cx = 100, cy = 100;
      for (let r = 20; r <= 80; r += 20) {
        ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI * 2);
        ctx.strokeStyle = `rgba(0,255,200,${0.06 + (r === 80 ? 0.04 : 0)})`; ctx.lineWidth = 0.5; ctx.stroke();
      }
      ctx.strokeStyle = "rgba(0,255,200,0.05)";
      ctx.beginPath(); ctx.moveTo(cx, 10); ctx.lineTo(cx, 190); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(10, cy); ctx.lineTo(190, cy); ctx.stroke();
      const angle = t * 2;
      ctx.beginPath(); ctx.moveTo(cx, cy); ctx.arc(cx, cy, 85, angle - 0.5, angle); ctx.closePath();
      const grd = ctx.createRadialGradient(cx, cy, 0, cx, cy, 85);
      grd.addColorStop(0, "rgba(0,255,200,0.15)"); grd.addColorStop(1, "rgba(0,255,200,0.02)");
      ctx.fillStyle = grd; ctx.fill();
      ctx.beginPath(); ctx.moveTo(cx, cy);
      ctx.lineTo(cx + Math.cos(angle) * 85, cy + Math.sin(angle) * 85);
      ctx.strokeStyle = "rgba(0,255,200,0.5)"; ctx.lineWidth = 1.5; ctx.stroke();
      ctx.beginPath(); ctx.arc(cx, cy, 3, 0, Math.PI * 2);
      ctx.fillStyle = "rgba(0,255,200,0.6)"; ctx.fill();
      for (let i = 0; i < 5; i++) {
        const ba = angle - Math.random() * 1.5, br = 20 + Math.random() * 55;
        const bx = cx + Math.cos(ba) * br, by = cy + Math.sin(ba) * br;
        const fade = Math.max(0, 1 - (angle - ba) / 1.5);
        ctx.beginPath(); ctx.arc(bx, by, 1.5, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0,255,200,${fade * 0.4})`; ctx.fill();
      }
      id = requestAnimationFrame(draw);
    };
    draw();
    return () => cancelAnimationFrame(id);
  }, [active]);

  if (!active && phase === 0) return null;

  const steps = [
    { label: "Motor Local", icon: "", done: phase >= 100 },
    { label: "Claude IA", icon: "", done: aiPhase === "done" },
    { label: "Resultado", icon: "", done: false },
  ];

  return (
    <div className="flex flex-col items-center gap-4 py-6">
      {/* Step indicators */}
      <div className="flex items-center gap-1">
        {steps.map((s, i) => (
          <div key={i} className="flex items-center gap-1">
            {i > 0 && <div className={`w-8 h-px ${s.done || steps[i-1].done ? "bg-emerald-400/40" : "bg-white/[0.06]"}`} />}
            <div className={`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold tracking-wider transition-all duration-500 ${
              s.done ? "bg-emerald-500/15 border border-emerald-500/25 text-emerald-400" 
              : i === step ? "bg-white/[0.04] border border-white/[0.08] text-white/40 animate-pulse" 
              : "bg-white/[0.01] border border-white/[0.04] text-white/15"
            }`}>
              <span>{s.icon}</span>
              <span>{s.label}</span>
              {s.done && <CheckCircle2 size={10} className="text-emerald-400" />}
            </div>
          </div>
        ))}
      </div>

      <canvas ref={ref} width={200} height={200} className="w-32 h-32" />

      {/* Progress bar */}
      <div className="w-64 h-1.5 bg-white/5 rounded-full overflow-hidden">
        <div className="h-full rounded-full transition-all duration-100"
          style={{ 
            width: `${phase}%`,
            background: "linear-gradient(90deg, #10b981, #06b6d4, #8b5cf6)",
            boxShadow: "0 0 12px rgba(16,185,129,0.4)"
          }} />
      </div>

      {/* Log stream */}
      <div className="w-72 h-32 overflow-hidden relative">
        <div className="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/80 pointer-events-none z-10" />
        <div className="space-y-1 px-2">
          {logLines.map((ln, i) => (
            <div key={i} className="text-xs text-emerald-400/50 flex items-center gap-2"
              style={{ fontFamily: "monospace", fontSize: "10px", opacity: i === logLines.length - 1 ? 1 : 0.35 }}>
              <span className="text-emerald-500/30"></span>
              <span>{ln}</span>
            </div>
          ))}
        </div>
      </div>

      <p className="text-xs text-white/20 tracking-widest uppercase" style={{ fontFamily: "monospace" }}>
        {phase < 100 ? `Analizando... ${phase}%` : "Motor local completo  esperando IA..."}
      </p>
    </div>
  );
}

//  Glass Card 
function Glass({ children, className = "", glow, hoverGlow = true }) {
  return (
    <div className={`group relative rounded-2xl border border-white/[0.06] backdrop-blur-xl transition-all duration-500
      ${glow ? "bg-emerald-500/[0.02] border-emerald-500/[0.12] shadow-lg shadow-emerald-500/[0.05]" : "bg-white/[0.02]"}
      ${hoverGlow ? "hover:border-emerald-400/20 hover:shadow-lg hover:shadow-emerald-500/[0.08] hover:bg-white/[0.03]" : ""}
      ${className}`}>
      {glow && <div className="absolute inset-0 rounded-2xl bg-gradient-to-b from-emerald-400/[0.03] to-transparent pointer-events-none" />}
      <div className="relative">{children}</div>
    </div>
  );
}

//  Holographic Icon Wrapper 
function HoloIcon({ icon: Icon, size = 18, color = "rgb(52,211,153)", active }) {
  return (
    <div className="relative inline-flex items-center justify-center">
      <div className={`absolute inset-0 rounded-lg blur-md transition-opacity duration-300 ${active ? "opacity-100" : "opacity-0 group-hover:opacity-60"}`}
        style={{ backgroundColor: color, transform: "scale(1.4)", opacity: active ? 0.15 : undefined }} />
      <Icon size={size} style={{ color, filter: `drop-shadow(0 0 4px ${color}40)` }} />
    </div>
  );
}

//  Badge 
function Badge({ c, children }) {
  const m = {
    red: "bg-red-500/15 text-red-400 border-red-500/20 shadow-red-500/10",
    amber: "bg-amber-500/15 text-amber-400 border-amber-500/20 shadow-amber-500/10",
    emerald: "bg-emerald-500/15 text-emerald-400 border-emerald-500/20 shadow-emerald-500/10",
    cyan: "bg-cyan-500/15 text-cyan-300 border-cyan-500/20 shadow-cyan-500/10",
  };
  return <span className={`inline-flex items-center px-2 py-0.5 text-xs font-black rounded-md border shadow-sm tracking-widest ${m[c]}`}>{children}</span>;
}

//  User Metrics Bar 
function MetricsBar({ findings, totalRecuperable }) {
  return (
    <div className="flex items-center gap-4 px-5 py-2.5 border-b border-white/[0.03] bg-white/[0.01]">
      <div className="flex items-center gap-1.5">
        <div className={`w-2 h-2 rounded-full ${findings > 0 ? "bg-red-400 shadow-sm shadow-red-400/50 animate-pulse" : "bg-emerald-400 animate-pulse"}`} />
        <span className="text-xs text-white/25" style={{ fontFamily: "monospace", fontSize: "10px" }}>
          {findings} hallazgo{findings !== 1 ? "s" : ""}
        </span>
      </div>
      {totalRecuperable > 0 && (
        <div className="flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/[0.06] border border-emerald-500/[0.1]">
          <Zap size={10} className="text-emerald-400" />
          <span className="text-xs text-emerald-400 font-bold" style={{ fontFamily: "monospace", fontSize: "10px" }}>
            S/ {totalRecuperable.toFixed(2)}
          </span>
          <span className="text-[10px] text-emerald-400/40">recuperable</span>
        </div>
      )}
      <div className="ml-auto flex items-center gap-1.5">
        <Signal size={10} className="text-white/15" />
        <span className="text-xs text-white/15" style={{ fontFamily: "monospace", fontSize: "10px" }}>SIGNAL v3</span>
      </div>
    </div>
  );
}

//  Findings Feed 
function Feed({ findings }) {
  if (!findings.length) return null;
  const recent = findings.slice(-5).reverse();
  return (
    <Glass className="p-4 mx-5 mb-4">
      <div className="flex items-center gap-2 mb-3">
        <HoloIcon icon={Activity} size={14} color="rgb(52,211,153)" />
        <h4 className="text-xs font-black tracking-widest text-emerald-400/50 uppercase">Tus hallazgos</h4>
        <span className="text-xs text-white/15 ml-auto" style={{ fontFamily: "monospace" }}>{findings.length}</span>
      </div>
      <div className="space-y-1.5">
        {recent.map((f, i) => (
          <div key={i} className="flex items-center gap-2 text-xs py-1.5 px-2.5 rounded-lg bg-white/[0.015] border border-white/[0.03]"
            style={i === 0 ? { animation: "slideIn 0.4s ease-out" } : {}}>
            <div className={`w-1.5 h-1.5 rounded-full flex-shrink-0 ${f.risk === "alto" ? "bg-red-400 shadow-sm shadow-red-400/50" : "bg-amber-400 shadow-sm shadow-amber-400/50"}`} />
            <span className="text-white/30 flex-shrink-0" style={{ fontFamily: "monospace", fontSize: "10px" }}>{f.time}</span>
            <span className="text-white/10">|</span>
            <span className="text-white/40 truncate"><span className="font-bold text-white/60">{f.tipo}</span>  "{f.kw}"</span>
            <Badge c={f.risk === "alto" ? "red" : "amber"}>{f.risk === "alto" ? "ALTO" : "MEDIO"}</Badge>
          </div>
        ))}
      </div>
      <style>{``}</style>
    </Glass>
  );
}

//  Global Skyline (visible on ALL pages) 
function Skyline() {
  const wins = (bx, by, bw, bh, seed) => {
    const w = [];
    const cols = Math.floor(bw / 6);
    const rows = Math.floor(bh / 8);
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const hash = Math.sin(seed + r * 13.7 + c * 7.3) * 10000;
        const frac = hash - Math.floor(hash);
        if (frac > 0.55) w.push({ x: bx + 3 + c * 6, y: by + 4 + r * 8, warm: frac > 0.75 });
      }
    }
    return w;
  };
  const B = [
    [0,172,48,68,0,0],[52,180,35,60,0,0],[92,88,60,152,1,0],[157,158,38,82,0,0],
    [200,112,55,128,0,0,'s'],[260,170,36,70,0,0],[300,182,30,58,0,0],
    [335,72,58,168,0,1],[398,162,40,78,0,0],[443,142,46,98,0,0],[494,175,34,65,0,0],
    [533,78,56,162,1,0],[594,158,38,82,0,0],[637,138,48,102,0,0],[690,172,34,68,0,0],
    [729,98,60,142,1,0,'s'],[794,165,36,75,0,0],[835,145,50,95,0,0],[890,178,32,62,0,0],
    [927,85,56,155,1,0],[988,162,38,78,0,0],[1031,128,52,112,0,0],[1088,170,36,70,0,0],
    [1129,102,50,138,0,1],[1184,172,38,68,0,0],[1227,160,42,80,0,0],
    [1274,178,36,62,0,0],[1315,170,42,70,0,0],[1362,180,38,60,0,0],
  ];
  return (
    <div className="fixed bottom-0 left-0 right-0 pointer-events-none" style={{ zIndex: 1 }}>
      <svg width="100%" height="260" viewBox="0 0 1400 260" preserveAspectRatio="xMidYMax slice" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="bF" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stopColor="#0e1824"/><stop offset="100%" stopColor="#080e18"/></linearGradient>
          <linearGradient id="bS" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stopColor="#0a1119"/><stop offset="100%" stopColor="#060a11"/></linearGradient>
          <linearGradient id="tw" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stopColor="rgba(0,255,200,0.18)"/><stop offset="100%" stopColor="rgba(0,255,200,0.04)"/></linearGradient>
        </defs>
        {/* Far bg */}
        <g opacity="0.3">
          {[[20,148,50],[100,155,42],[180,140,48],[310,150,44],[470,142,46],[590,148,40],[730,138,45],[870,146,42],[1020,140,48],[1170,150,45],[1320,155,48]].map(([x,y,w],i)=>(
            <rect key={`bg${i}`} x={x} y={y} width={w} height={260-y} fill="#080d14"/>
          ))}
        </g>
        {/* Buildings with 3D edge + individual windows */}
        {B.map(([bx,by,bw,bh,tower,spire,shape],i) => {
          const sw=5;
          const wl=wins(bx,by,bw,bh,i*17.3);
          return (
            <g key={`b${i}`}>
              <polygon points={`${bx},${by} ${bx+sw},${by-3} ${bx+sw},${by+bh} ${bx},${by+bh}`} fill="url(#bS)"/>
              <rect x={bx+sw} y={by} width={bw-sw} height={bh} fill="url(#bF)"/>
              <line x1={bx+bw} y1={by} x2={bx+bw} y2={by+bh} stroke="rgba(140,180,255,0.04)" strokeWidth="1"/>
              <line x1={bx} y1={by} x2={bx+bw} y2={by} stroke="rgba(140,180,255,0.03)" strokeWidth="0.5"/>
              {bh>80 && Array.from({length:Math.floor(bh/12)},(_,fi)=>by+8+fi*12).map(fy=>(
                <line key={`fl${i}_${fy}`} x1={bx+sw} y1={fy} x2={bx+bw} y2={fy} stroke="rgba(140,180,255,0.012)" strokeWidth="0.3"/>
              ))}
              {wl.map((w,wi)=>(
                <g key={`w${i}_${wi}`}>
                  <rect x={w.x} y={w.y} width={3} height={4} rx="0.3" fill={w.warm?"rgba(255,210,100,0.12)":"rgba(200,230,255,0.08)"}/>
                  {w.warm && <rect x={w.x-0.5} y={w.y-0.5} width={4} height={5} rx="0.5" fill="rgba(255,200,80,0.03)"/>}
                </g>
              ))}
              {shape==='s' && <>
                <rect x={bx+5} y={by-28} width={bw-10} height={30} fill="url(#bF)"/>
                <line x1={bx+5} y1={by-28} x2={bx+bw-5} y2={by-28} stroke="rgba(140,180,255,0.03)" strokeWidth="0.5"/>
                <rect x={bx+10} y={by-50} width={bw-20} height={24} fill="#0a1218"/>
                {wins(bx+5,by-28,bw-10,30,i*23).map((w,wi)=>(
                  <rect key={`ws${i}_${wi}`} x={w.x} y={w.y} width={3} height={4} rx="0.3" fill={w.warm?"rgba(255,210,100,0.1)":"rgba(200,230,255,0.07)"}/>
                ))}
              </>}
              {spire===1 && <>
                <rect x={bx+Math.floor(bw/2)-4} y={by-8} width={8} height={10} fill="#0c1620"/>
                <polygon points={`${bx+Math.floor(bw/2)},${by-42} ${bx+Math.floor(bw/2)-3},${by-8} ${bx+Math.floor(bw/2)+3},${by-8}`} fill="#0a1218"/>
              </>}
              {bh>100 && !spire && !tower && <rect x={bx+Math.floor(bw/2)-8} y={by-4} width={16} height={5} fill="#0c1620" stroke="rgba(0,255,200,0.02)" strokeWidth="0.3"/>}
            </g>
          );
        })}
        {/* Telecom towers */}
        {[[122,84,50],[561,74,42],[759,68,26],[955,81,48]].map(([tx,tb,tt],ti)=>(
          <g key={`tw${ti}`}>
            <line x1={tx} y1={tb} x2={tx} y2={tt} stroke="url(#tw)" strokeWidth={ti===2?2.5:1.8}/>
            <line x1={tx-6} y1={tb} x2={tx} y2={tt+6} stroke="rgba(0,255,200,0.08)" strokeWidth="0.7"/>
            <line x1={tx+6} y1={tb} x2={tx} y2={tt+6} stroke="rgba(0,255,200,0.08)" strokeWidth="0.7"/>
            <line x1={tx-5} y1={(tb+tt)/2} x2={tx+5} y2={(tb+tt)/2} stroke="rgba(0,255,200,0.06)" strokeWidth="0.5"/>
            <line x1={tx-4} y1={(tb+tt)/2-8} x2={tx+4} y2={(tb+tt)/2-8} stroke="rgba(0,255,200,0.05)" strokeWidth="0.5"/>
            <circle cx={tx} cy={tt-2} r={ti===2?3:2} fill="#ff2222"><animate attributeName="opacity" values="1;0.1;1" dur={`${1.5+ti*0.3}s`} repeatCount="indefinite"/></circle>
            <circle cx={tx} cy={tt-2} r={ti===2?10:7} fill="none" stroke="rgba(255,30,30,0.12)">
              <animate attributeName="r" values={`${ti===2?6:4};${ti===2?13:10};${ti===2?6:4}`} dur={`${1.5+ti*0.3}s`} repeatCount="indefinite"/>
              <animate attributeName="opacity" values="0.12;0;0.12" dur={`${1.5+ti*0.3}s`} repeatCount="indefinite"/>
            </circle>
            {[10,17,24].map((r,i)=>(<path key={`a${ti}_${i}`} d={`M${tx-r} ${tt-2}A${r} ${r} 0 0 1 ${tx+r} ${tt-2}`} fill="none" stroke={`rgba(0,255,200,${0.07-i*0.02})`} strokeWidth="0.7"><animate attributeName="opacity" values={`${0.07-i*0.02};0.01;${0.07-i*0.02}`} dur={`${2+i*0.5}s`} repeatCount="indefinite"/></path>))}
          </g>
        ))}
        <rect x="0" y="248" width="1400" height="12" fill="#050a10" opacity="0.5"/>
      </svg>
    </div>
  );
}
//  Logo 
function Logo({ size = "sm" }) {
  if (size === "hero") {
    return (
      <div className="flex flex-col items-center gap-3">
        <div className="relative">
          <div className="absolute -inset-6 bg-amber-500/8 blur-3xl rounded-full -z-10" />
          <img src={LOGO_SRC} alt="Axonexus" className="w-28 h-28 sm:w-32 sm:h-32 object-contain"
            style={{ filter: "drop-shadow(0 0 20px rgba(180,140,50,0.15))" }} />
        </div>
        <div className="text-2xl sm:text-3xl font-black tracking-[0.4em] text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-cyan-400 to-emerald-300"
          style={{ fontFamily: "'JetBrains Mono','Fira Code',monospace" }}>
          SIGNAL
        </div>
      </div>
    );
  }

  //  COMPACT: Header 
  return (
    <div className="flex items-center gap-2.5">
      <div className="relative">
        <img src={LOGO_SRC} alt="Axonexus" className="w-9 h-9 object-contain"
          style={{ filter: "drop-shadow(0 0 6px rgba(180,140,50,0.2))" }} />
      </div>
      <div>
        <div className="text-sm font-black tracking-tight text-white leading-none" style={{ fontFamily: "'JetBrains Mono','Fira Code',monospace" }}>
          AXONEXUS
        </div>
        <div className="text-emerald-400 font-black -mt-0.5" style={{ fontFamily: "'JetBrains Mono',monospace", fontSize: "9px", letterSpacing: "0.25em" }}>
          SIGNAL
        </div>
      </div>
    </div>
  );
}

//  Animated Counter for Landing 
function AnimatedCounter() {
  const [count, setCount] = useState(0);
  const [caseIdx, setCaseIdx] = useState(0);
  const target = 47830;
  const cases = [
    { name: "Mara G.", city: "Lima", amount: "S/ 432.00", desc: "Club Msica Premium  36 meses sin ACEPTO" },
    { name: "Carlos R.", city: "Arequipa", amount: "S/ 287.28", desc: "Alertas Horscopo + Trivias SMS  24 meses" },
    { name: "Ana L.", city: "Trujillo", amount: "S/ 612.00", desc: "Seguro no solicitado en recibo Movistar" },
  ];
  useEffect(() => {
    let current = 0;
    const step = Math.ceil(target / 60);
    const iv = setInterval(() => {
      current += step;
      if (current >= target) { current = target; clearInterval(iv); }
      setCount(current);
    }, 30);
    return () => clearInterval(iv);
  }, []);
  useEffect(() => {
    const iv = setInterval(() => setCaseIdx(p => (p + 1) % cases.length), 4000);
    return () => clearInterval(iv);
  }, []);
  const c = cases[caseIdx];
  return (
    <div className="mt-6 space-y-3">
      <div className="flex items-center justify-center gap-2">
        <div className="px-4 py-2 rounded-full bg-emerald-500/[0.06] border border-emerald-500/[0.12]">
          <span className="text-sm text-emerald-400 font-black" style={{ fontFamily: "'JetBrains Mono',monospace" }}>
            S/ {count.toLocaleString("es-PE", { minimumFractionDigits: 2 })}
          </span>
          <span className="text-[10px] text-white/20 ml-2">recuperados por usuarios</span>
        </div>
      </div>
      {/* Rotating testimonial */}
      <div className="flex items-center justify-center">
        <div key={caseIdx} className="px-4 py-2.5 rounded-xl bg-white/[0.02] border border-white/[0.05] max-w-xs text-center"
          style={{ animation: "slideIn 0.5s ease-out" }}>
          <div className="flex items-center justify-center gap-1 mb-1">
            {[1,2,3,4,5].map(s => <span key={s} className="text-amber-400" style={{ fontSize: "10px" }}></span>)}
          </div>
          <p className="text-[11px] text-white/30 italic leading-snug">"{c.desc}"</p>
          <div className="flex items-center justify-center gap-2 mt-1.5">
            <span className="text-[10px] text-emerald-400/60 font-bold">{c.amount} devueltos</span>
            <span className="text-[10px] text-white/15"> {c.name}, {c.city}</span>
          </div>
        </div>
      </div>
    </div>
  );
}

//  Landing 
function Landing({ onStart }) {
  const [vis, setVis] = useState(false);
  useEffect(() => { setTimeout(() => setVis(true), 150); }, []);

  return (
    <div className="relative min-h-screen overflow-hidden bg-black">
      <ParticleMesh />
      <div className="absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-transparent" />

      <div className={`relative z-10 max-w-2xl mx-auto px-5 pt-12 sm:pt-20 pb-16 transition-all duration-1000 ease-out ${vis ? "opacity-100 translate-y-0" : "opacity-0 translate-y-12"}`}>

        {/*  ABOVE THE FOLD: Logo + Headline + CTA  */}
        <div className="text-center">
          {/* Logo - hexagon only, no "Sovereign Institute" text */}
          <div className="mb-4 inline-block relative">
            <div className="absolute -inset-6 bg-amber-500/8 blur-3xl rounded-full -z-10" />
            <img src={LOGO_SRC} alt="Axonexus" className="w-28 h-28 sm:w-32 sm:h-32 object-contain"
              style={{ filter: "drop-shadow(0 0 20px rgba(180,140,50,0.15))" }} />
          </div>

          {/* Brand */}
          <div className="mb-6">
            <div className="text-3xl sm:text-4xl font-black tracking-tight text-white leading-none"
              style={{ fontFamily: "'JetBrains Mono','Fira Code',monospace", letterSpacing: "-0.01em" }}>
              AXONEXUS
            </div>
            <div className="text-xl sm:text-2xl font-black tracking-[0.45em] text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-cyan-400 to-emerald-300 mt-1"
              style={{ fontFamily: "'JetBrains Mono','Fira Code',monospace" }}>
              SIGNAL
            </div>
            <div className="mt-1.5 text-xs text-white/20 tracking-[0.2em] uppercase font-medium">
              Auditora Inteligente Telecom
            </div>
          </div>

          {/* Headline - emotional, concise */}
          <h1 className="text-3xl sm:text-4xl font-black text-white leading-tight mb-4">
            Cada mes te cobran
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-cyan-400 to-emerald-300">
              {" "}sin tu permiso.
            </span>
          </h1>

          <p className="text-lg sm:text-xl font-bold text-white/60 mb-6 max-w-md mx-auto leading-snug">
            S/ 5.00 al mes que no autorizaste son <span className="text-red-400 font-black">S/ 180 en 3 aos</span>.
            <br />
            <span className="text-white/40">La ley dice que te los devuelvan.</span>
          </p>

          {/* CTA - ABOVE THE FOLD */}
          <button onClick={onStart}
            className="group relative inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl text-black font-black text-sm tracking-widest uppercase transition-all duration-300 hover:shadow-2xl hover:shadow-emerald-500/30 hover:scale-105 active:scale-100">
            <Shield size={18} strokeWidth={2.5} />
            RECUPERAR MI DINERO
            <ArrowRight size={16} strokeWidth={3} className="group-hover:translate-x-1 transition-transform" />
            <div className="absolute -inset-1 rounded-xl bg-emerald-400/15 blur-lg -z-10 group-hover:bg-emerald-400/25 transition-colors" />
          </button>

          {/* Trust line + animated counter */}
          <p className="mt-3 text-xs text-white/25 flex items-center justify-center gap-1.5">
            <Lock size={11} className="text-emerald-400/40" />
            No pedimos datos bancarios. Solo el texto de tu recibo.
          </p>
          <AnimatedCounter />
        </div>

        {/*  VISUAL RECEIPT EXAMPLE  */}
        <div className="mt-14 max-w-sm mx-auto"
          style={{ transition: "all 0.8s ease 0.6s", opacity: vis ? 1 : 0, transform: vis ? "translateY(0)" : "translateY(20px)" }}>
          <p className="text-xs text-white/20 tracking-widest uppercase font-bold mb-3 text-center">As detectamos cobros indebidos</p>
          <div className="rounded-xl border border-white/[0.06] bg-white/[0.02] backdrop-blur-sm p-4 overflow-hidden">
            {/* Fake receipt header */}
            <div className="flex items-center justify-between mb-3 pb-2 border-b border-white/[0.05]">
              <span className="text-xs text-white/30 font-bold">RECIBO DE SERVICIO</span>
              <span className="text-xs text-white/15">Ene 2026</span>
            </div>
            {/* Normal line */}
            <div className="flex justify-between py-1.5">
              <span className="text-xs text-white/30">Plan Postpago 45GB</span>
              <span className="text-xs text-white/40">S/ 69.90</span>
            </div>
            {/* Normal line */}
            <div className="flex justify-between py-1.5">
              <span className="text-xs text-white/30">Llamadas adicionales</span>
              <span className="text-xs text-white/40">S/ 3.20</span>
            </div>
            {/* FLAGGED line */}
            <div className="flex justify-between py-2 px-2 -mx-2 my-1 rounded-lg bg-red-500/[0.06] border border-red-500/20 relative">
              <div className="flex items-center gap-2">
                <AlertTriangle size={12} className="text-red-400 flex-shrink-0" />
                <span className="text-xs text-red-300 font-bold">Club Msica Premium</span>
              </div>
              <span className="text-xs text-red-400 font-black line-through decoration-2">S/ 4.99</span>
              {/* Annotation */}
              <div className="absolute -right-1 -top-7 flex items-center gap-1">
                <div className="px-2 py-0.5 rounded bg-red-500/20 border border-red-500/25">
                  <span className="text-xs text-red-300 font-black" style={{ fontSize: "9px" }}>VAS SIN CONSENTIMIENTO</span>
                </div>
              </div>
            </div>
            {/* Another flagged */}
            <div className="flex justify-between py-2 px-2 -mx-2 my-1 rounded-lg bg-red-500/[0.06] border border-red-500/20">
              <div className="flex items-center gap-2">
                <AlertTriangle size={12} className="text-red-400 flex-shrink-0" />
                <span className="text-xs text-red-300 font-bold">Alertas Horscopo</span>
              </div>
              <span className="text-xs text-red-400 font-black line-through decoration-2">S/ 2.99</span>
            </div>
            {/* Normal */}
            <div className="flex justify-between py-1.5 mt-1 pt-2 border-t border-white/[0.05]">
              <span className="text-xs text-white/40 font-bold">TOTAL</span>
              <span className="text-xs text-white/50 font-bold">S/ 81.08</span>
            </div>
            {/* Signal verdict */}
            <div className="mt-3 pt-3 border-t border-emerald-500/10 flex items-start gap-2">
              <Signal size={14} className="text-emerald-400 flex-shrink-0 mt-0.5" />
              <div>
                <p className="text-xs text-emerald-400 font-bold">Signal detect 2 cobros sin tu "ACEPTO"</p>
                <p className="text-xs text-white/20 mt-0.5">S/ 7.98/mes  36 meses = <span className="text-emerald-400 font-bold">S/ 287.28 a recuperar</span></p>
              </div>
            </div>
          </div>
        </div>

        {/*  3-STEP FLOW  */}
        <div className="mt-12 flex items-center justify-center gap-2 sm:gap-3 max-w-md mx-auto"
          style={{ transition: "all 0.8s ease 0.8s", opacity: vis ? 1 : 0, transform: vis ? "translateY(0)" : "translateY(10px)" }}>
          {[
            { step: "1", text: "Pega tu recibo" },
            { step: "2", text: "Signal detecta" },
            { step: "3", text: "Recupera tu dinero" },
          ].map((s, i) => (
            <div key={i} className="flex items-center gap-1.5 sm:gap-2">
              {i > 0 && <ChevronRight size={12} className="text-emerald-500/25" />}
              <div className="flex items-center gap-1.5 px-2.5 py-1.5 rounded-full border border-white/[0.06] bg-white/[0.02]">
                <span className="w-5 h-5 rounded-full bg-emerald-500/20 border border-emerald-500/30 flex items-center justify-center text-emerald-400 font-black" style={{ fontSize: "10px" }}>{s.step}</span>
                <span className="text-xs text-white/35 font-medium">{s.text}</span>
              </div>
            </div>
          ))}
        </div>

        {/*  LEGAL AUTHORITY  */}
        <div className="mt-10 max-w-lg mx-auto"
          style={{ transition: "all 0.8s ease 1s", opacity: vis ? 1 : 0 }}>
          <p className="text-xs text-white/15 tracking-widest uppercase font-bold mb-3 text-center">Tu respaldo legal</p>
          <div className="grid grid-cols-3 gap-2 sm:gap-3">
            {[
              { icon: Radio, num: "Art. 118-A", sub: "Sin tu ACEPTO,", bold: "cobro nulo" },
              { icon: FileSearch, num: "Art. 32", sub: "No est en la lista,", bold: "no va en tu recibo" },
              { icon: PhoneOff, num: "Art. 62", sub: "Llamadas fuera de hora,", bold: "prohibidas" },
            ].map((item, i) => (
              <div key={i} className="text-center p-2.5 sm:p-3 rounded-xl border border-white/[0.04] bg-white/[0.015]">
                <div className="inline-flex mb-1.5"><HoloIcon icon={item.icon} size={18} /></div>
                <div className="text-xs sm:text-sm font-black text-emerald-400" style={{ fontFamily: "'JetBrains Mono',monospace" }}>{item.num}</div>
                <div className="text-xs text-white/20 mt-0.5 leading-tight">{item.sub}</div>
                <div className="text-xs text-white/45 font-bold leading-tight">{item.bold}</div>
              </div>
            ))}
          </div>
        </div>

        {/* Second CTA */}
        <div className="mt-10 text-center">
          <button onClick={onStart}
            className="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl text-black font-black text-xs tracking-widest uppercase hover:shadow-xl hover:shadow-emerald-500/25 transition-all">
            <ScanLine size={16} strokeWidth={2.5} />
            ANALIZAR MI RECIBO AHORA
          </button>
        </div>

      </div>
    </div>
  );
}

//  Tabs 
function TabNav({ tab, set }) {
  const T = [
    { id: "recibo", label: "Analizar", icon: ScanLine },
    { id: "cobranza", label: "Cobranza", icon: PhoneOff },
    { id: "calc", label: "Liquidar", icon: Calculator },
    { id: "norma", label: "Normativa", icon: Layers },
  ];
  return (
    <div className="flex gap-0.5 border-b border-white/[0.04] px-2">
      {T.map(t => (
        <button key={t.id} onClick={() => set(t.id)}
          className={`flex items-center gap-1.5 px-4 py-3 text-xs font-black tracking-widest uppercase border-b-2 transition-all duration-300 ${
            tab === t.id ? "border-emerald-400 text-emerald-400" : "border-transparent text-white/20 hover:text-white/50 hover:border-white/10"}`}>
          <t.icon size={13} strokeWidth={tab === t.id ? 2.5 : 2} />
          <span className="hidden sm:inline">{t.label}</span>
        </button>
      ))}
    </div>
  );
}

//  Tab: Recibo 
function TRecibo({ addFinding }) {
  const [txt, setTxt] = useState("");
  const [res, setRes] = useState(null);
  const [aiResult, setAiResult] = useState(null);
  const [aiLoading, setAiLoading] = useState(false);
  const [scanning, setScanning] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [uploadMsg, setUploadMsg] = useState("");
  const [dragOver, setDragOver] = useState(false);
  const fileRef = useRef(null);

  // Call Claude Sonnet via Netlify Function for deep analysis
  const analyzeWithClaude = useCallback(async (receiptText, localResult) => {
    setAiLoading(true);
    setAiResult(null);
    try {
      const systemPrompt = `Analiza el siguiente recibo de telecomunicaciones peruano.
Responde SOLO con un JSON vlido (sin backticks, sin markdown) con esta estructura exacta:
{
  "veredicto": "LIMPIO" | "COBROS_DETECTADOS",
  "resumen": "resumen breve del anlisis",
  "hallazgos": [
    {
      "concepto": "nombre del concepto cobrado",
      "monto": 0.00,
      "vector": "T-01 a T-10",
      "riesgo": "ALTO" | "MEDIO" | "BAJO",
      "base_legal": "artculo especfico",
      "accion": "qu debe hacer el usuario"
    }
  ],
  "conceptos_legitimos": ["lista de conceptos que S son legtimos"],
  "carta_reclamo": "texto breve para el libro de reclamaciones si hay hallazgos, o null si est limpio"
}

Si el recibo est completamente limpio (solo plan + bonificaciones + redondeo), responde con veredicto "LIMPIO" y hallazgos vaco [].
NO inventes hallazgos. S PRECISO.`;

      const response = await fetch("/api/analyze", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "claude-sonnet-4-20250514",
          max_tokens: 4000,
          system: systemPrompt,
          messages: [{
            role: "user",
            content: `RECIBO DE TELECOMUNICACIONES:\n\n${receiptText.substring(0, 8000)}\n\nANLISIS LOCAL PREVIO: ${JSON.stringify(localResult.resumen)}`
          }],
        }),
      });

      if (!response.ok) throw new Error(`API error: ${response.status}`);
      const data = await response.json();

      // Parse Claude's response
      const aiText = data.content?.map(c => c.text || "").join("") || "";
      const cleaned = aiText.replace(/```json|```/g, "").trim();
      const parsed = JSON.parse(cleaned);
      setAiResult(parsed);

      // Add AI findings to feed
      if (parsed.hallazgos?.length > 0) {
        const now = new Date();
        const ts = now.getHours().toString().padStart(2, "0") + ":" + now.getMinutes().toString().padStart(2, "0") + ":" + now.getSeconds().toString().padStart(2, "0");
        parsed.hallazgos.forEach(h => addFinding({
          tipo: h.vector || "IA",
          kw: h.concepto,
          monto: h.monto,
          risk: h.riesgo?.toLowerCase() || "alto",
          norma: h.base_legal,
          ctx: h.accion,
          time: ts,
        }));
      }
    } catch (err) {
      console.error("Claude API error:", err);
      setAiResult({ error: err.message });
    }
    setAiLoading(false);
  }, [addFinding]);

  const onScanDone = useCallback(() => {
    const result = scanRecibo(txt);
    setRes(result);
    const now = new Date();
    const ts = now.getHours().toString().padStart(2, "0") + ":" + now.getMinutes().toString().padStart(2, "0") + ":" + now.getSeconds().toString().padStart(2, "0");
    result.hallazgos.forEach(f => addFinding({ ...f, time: ts }));
    setScanning(false);
    // Also trigger Claude deep analysis
    analyzeWithClaude(txt, result);
  }, [txt, addFinding, analyzeWithClaude]);

  const go = () => { if (!txt.trim()) return; setRes(null); setScanning(true); };

  //  Extract text from PDF using pdf.js 
  const extractPDF = async (file) => {
    setUploading(true);
    setUploadMsg("Cargando PDF...");
    try {
      // Load pdf.js from CDN if not loaded
      if (!window.pdfjsLib) {
        await new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js";
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
        });
        window.pdfjsLib.GlobalWorkerOptions.workerSrc =
          "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";
      }

      const arrayBuffer = await file.arrayBuffer();
      const pdf = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;
      let fullText = "";
      setUploadMsg(`Extrayendo texto (${pdf.numPages} pginas)...`);

      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const content = await page.getTextContent();
        const pageText = content.items.map(item => item.str).join(" ");
        fullText += pageText + "\n";
        setUploadMsg(`Extrayendo pgina ${i}/${pdf.numPages}...`);
      }

      if (fullText.trim()) {
        setTxt(fullText.trim());
        setUploadMsg(` ${pdf.numPages} pgina(s) extradas  ${fullText.trim().split(/\s+/).length} palabras`);
      } else {
        setUploadMsg(" El PDF no contiene texto legible. Intenta con una captura de pantalla.");
      }
    } catch (err) {
      console.error(err);
      setUploadMsg(" Error al leer el PDF. Intenta copiando y pegando el texto.");
    }
    setUploading(false);
  };

  //  Handle image upload (show preview, user can still paste text) 
  const handleImage = async (file) => {
    setUploading(true);
    setUploadMsg("Imagen cargada. Extrayendo texto...");
    try {
      // Read image as data URL for preview
      const dataUrl = await new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = (e) => resolve(e.target.result);
        reader.readAsDataURL(file);
      });

      // Basic OCR simulation message  real OCR would need Tesseract.js or API
      setUploadMsg(" Para imgenes: copia el texto del recibo manualmente y pgalo abajo. Prximamente: OCR automtico.");
      setTxt(prev => prev || ""); // Keep any existing text
    } catch (err) {
      setUploadMsg(" Error al leer la imagen.");
    }
    setUploading(false);
  };

  //  File handler 
  const handleFile = (file) => {
    if (!file) return;
    setRes(null);
    if (file.type === "application/pdf") {
      extractPDF(file);
    } else if (file.type.startsWith("image/")) {
      handleImage(file);
    } else {
      // Try as text
      const reader = new FileReader();
      reader.onload = (e) => {
        setTxt(e.target.result);
        setUploadMsg(` Archivo cargado  ${e.target.result.split(/\s+/).length} palabras`);
      };
      reader.readAsText(file);
    }
  };

  //  Drag & Drop handlers 
  const onDragOver = (e) => { e.preventDefault(); e.stopPropagation(); setDragOver(true); };
  const onDragLeave = (e) => { e.preventDefault(); e.stopPropagation(); setDragOver(false); };
  const onDrop = (e) => {
    e.preventDefault(); e.stopPropagation(); setDragOver(false);
    const file = e.dataTransfer.files[0];
    if (file) handleFile(file);
  };

  return (
    <div className="space-y-5 p-5">
      <Glass className="p-5">
        <div className="flex items-center gap-2 mb-3">
          <HoloIcon icon={FileSearch} size={16} />
          <h3 className="text-xs font-black tracking-widest text-white/40 uppercase">Ingresa tu recibo</h3>
        </div>

        {/*  Upload Zone  */}
        <div
          onDragOver={onDragOver}
          onDragLeave={onDragLeave}
          onDrop={onDrop}
          onClick={() => fileRef.current?.click()}
          className={`relative cursor-pointer rounded-xl border-2 border-dashed p-6 mb-4 text-center transition-all duration-300 ${
            dragOver
              ? "border-emerald-400/50 bg-emerald-500/[0.06]"
              : "border-white/[0.06] bg-white/[0.01] hover:border-emerald-500/20 hover:bg-white/[0.02]"
          }`}
        >
          <input
            ref={fileRef}
            type="file"
            accept=".pdf,image/*,.txt,.csv"
            onChange={(e) => handleFile(e.target.files[0])}
            className="hidden"
          />
          <div className="flex flex-col items-center gap-3">
            <div className={`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 ${
              dragOver ? "bg-emerald-500/20" : "bg-white/[0.03]"
            }`}>
              <Upload size={22} className={`transition-colors duration-300 ${dragOver ? "text-emerald-400" : "text-white/20"}`} />
            </div>
            <div>
              <p className="text-sm font-bold text-white/40">
                {dragOver ? "Suelta tu archivo aqu" : "Arrastra tu recibo aqu"}
              </p>
              <p className="text-xs text-white/15 mt-1">PDF, imagen (JPG/PNG) o archivo de texto</p>
            </div>
            <div className="flex items-center gap-4 mt-1">
              <div className="flex items-center gap-1.5 text-xs text-white/20">
                <FileText size={12} /> PDF
              </div>
              <div className="flex items-center gap-1.5 text-xs text-white/20">
                <Image size={12} /> JPG / PNG
              </div>
            </div>
          </div>
          {uploading && (
            <div className="absolute inset-0 bg-black/60 rounded-xl flex items-center justify-center backdrop-blur-sm">
              <div className="flex items-center gap-3">
                <div className="w-5 h-5 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin" />
                <span className="text-xs text-emerald-400 font-bold tracking-wide">{uploadMsg}</span>
              </div>
            </div>
          )}
        </div>

        {/* Upload status message */}
        {uploadMsg && !uploading && (
          <div className={`text-xs tracking-wide mb-3 px-1 ${uploadMsg.startsWith("") ? "text-emerald-400/60" : uploadMsg.startsWith("") ? "text-amber-400/60" : "text-white/20"}`}>
            {uploadMsg}
          </div>
        )}

        {/* Divider */}
        <div className="flex items-center gap-3 mb-4">
          <div className="flex-1 h-px bg-white/[0.04]" />
          <span className="text-[10px] text-white/10 tracking-widest uppercase">o pega el texto</span>
          <div className="flex-1 h-px bg-white/[0.04]" />
        </div>

        {/* Textarea */}
        <textarea value={txt} onChange={e => setTxt(e.target.value)}
          placeholder={"Pega aqu el texto de tu recibo de Entel, Movistar, Claro o Bitel...\n\nCopia el contenido del PDF y pgalo para analizarlo contra el Art. 118-A."}
          className="w-full h-44 bg-white/[0.015] border border-white/[0.05] rounded-xl text-sm text-white/60 p-4 resize-y focus:outline-none focus:border-emerald-500/25 placeholder-white/10 transition-all duration-300"
          style={{ fontFamily: "'JetBrains Mono',monospace", fontSize: "11px" }} />
        <div className="flex items-center gap-3 mt-3">
          <button onClick={go} disabled={!txt.trim() || scanning}
            className="flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl text-black font-black text-xs tracking-widest uppercase transition-all hover:shadow-xl hover:shadow-emerald-500/20 disabled:opacity-30 disabled:cursor-not-allowed">
            <ScanLine size={14} strokeWidth={2.5} /> Escanear recibo
          </button>
          {txt && <button onClick={() => { setTxt(""); setRes(null); setUploadMsg(""); }} className="text-xs text-white/15 hover:text-white/40 tracking-wider transition-colors">Limpiar</button>}
        </div>
      </Glass>

      {/* Radar Animation */}
      {scanning && (
        <Glass glow className="overflow-hidden">
          <RadarScan active={scanning} onDone={onScanDone} aiPhase={aiLoading ? "loading" : aiResult ? "done" : "idle"} />
        </Glass>
      )}

      {/* Results */}
      {res !== null && !scanning && (
        <Glass glow className="p-5" style={{ animation: "slideIn 0.5s ease-out" }}>
          <h3 className="text-xs font-black tracking-widest text-white/40 uppercase mb-4 flex items-center gap-2">
            <HoloIcon icon={Eye} size={14} /> Resultado del anlisis
          </h3>

          {/* Receipt summary */}
          {res.reciboData && (res.reciboData.operadora || res.reciboData.total) && (
            <div className="rounded-xl bg-white/[0.02] border border-white/[0.04] p-3.5 mb-4">
              <div className="grid grid-cols-2 gap-2 text-xs">
                {res.reciboData.operadora && <div><span className="text-white/20">Operadora:</span> <span className="text-cyan-400/60 font-bold">{res.reciboData.operadora}</span></div>}
                {res.reciboData.total && <div><span className="text-white/20">Total:</span> <span className="text-white/60 font-bold">S/ {res.reciboData.total.toFixed(2)}</span></div>}
                {res.reciboData.periodo && <div><span className="text-white/20">Perodo:</span> <span className="text-white/40">{res.reciboData.periodo}</span></div>}
                {res.reciboData.telefono && <div><span className="text-white/20">Lnea:</span> <span className="text-white/40">{res.reciboData.telefono}</span></div>}
              </div>
              <div className="flex items-center gap-4 mt-2.5 pt-2.5 border-t border-white/[0.03]">
                <span className="text-[10px] text-white/15">{res.resumen.totalConceptos} conceptos analizados</span>
                <span className="text-[10px] text-emerald-400/30">{res.resumen.conceptosLimpios} legtimos</span>
                {res.resumen.montoIndebido > 0 && <span className="text-[10px] text-red-400/50 font-bold">S/ {res.resumen.montoIndebido.toFixed(2)} cuestionable</span>}
              </div>
            </div>
          )}

          {res.hallazgos.length === 0 ? (
            <div className="flex items-center gap-3 bg-emerald-500/[0.04] rounded-xl p-4 border border-emerald-500/10">
              <CheckCircle2 size={22} className="text-emerald-400 flex-shrink-0" style={{ filter: "drop-shadow(0 0 6px rgba(52,211,153,0.3))" }} />
              <div>
                <p className="text-sm text-emerald-400 font-bold">Recibo limpio  sin cobros indebidos detectados</p>
                <p className="text-xs text-white/25 mt-1">Todos los conceptos facturados corresponden a servicios de telecomunicaciones permitidos por el Art. 32 TUO OSIPTEL. No se detectaron suscripciones VAS, seguros no solicitados ni conceptos fuera de lista taxativa.</p>
              </div>
            </div>
          ) : (
            <>
              {/*  EXECUTIVE SUMMARY CARD  */}
              <div className="rounded-2xl overflow-hidden mb-5" style={{ background: "linear-gradient(135deg, rgba(239,68,68,0.08), rgba(245,158,11,0.04), rgba(16,185,129,0.03))", border: "1px solid rgba(239,68,68,0.15)" }}>
                <div className="p-5">
                  <div className="flex items-start justify-between mb-4">
                    <div className="flex items-center gap-3">
                      <div className="w-12 h-12 rounded-xl bg-red-500/15 border border-red-500/20 flex items-center justify-center">
                        <AlertTriangle size={24} className="text-red-400" style={{ filter: "drop-shadow(0 0 8px rgba(248,113,113,0.4))" }} />
                      </div>
                      <div>
                        <p className="text-lg font-black text-red-300">{res.hallazgos.length} Cobro{res.hallazgos.length > 1 ? "s" : ""} Cuestionable{res.hallazgos.length > 1 ? "s" : ""}</p>
                        <p className="text-xs text-white/25">Detectados por el motor de anlisis OSIPTEL</p>
                      </div>
                    </div>
                    {res.resumen.montoIndebido > 0 && (
                      <div className="text-right">
                        <p className="text-2xl font-black text-red-400" style={{ fontFamily: "'JetBrains Mono',monospace", textShadow: "0 0 20px rgba(248,113,113,0.3)" }}>
                          S/ {res.resumen.montoIndebido.toFixed(2)}
                        </p>
                        <p className="text-[10px] text-white/20 tracking-wider">POR MES</p>
                      </div>
                    )}
                  </div>
                  {res.resumen.montoIndebido > 0 && (
                    <div className="grid grid-cols-3 gap-3">
                      <div className="rounded-xl bg-black/30 border border-white/[0.04] p-3 text-center">
                        <p className="text-xs text-white/20 mb-1">12 meses</p>
                        <p className="text-sm font-black text-amber-400" style={{ fontFamily: "'JetBrains Mono',monospace" }}>
                          S/ {(res.resumen.montoIndebido * 12).toFixed(2)}
                        </p>
                      </div>
                      <div className="rounded-xl bg-black/30 border border-white/[0.04] p-3 text-center">
                        <p className="text-xs text-white/20 mb-1">24 meses</p>
                        <p className="text-sm font-black text-amber-400" style={{ fontFamily: "'JetBrains Mono',monospace" }}>
                          S/ {(res.resumen.montoIndebido * 24).toFixed(2)}
                        </p>
                      </div>
                      <div className="rounded-xl bg-emerald-500/[0.06] border border-emerald-500/15 p-3 text-center">
                        <p className="text-xs text-emerald-400/40 mb-1">36 meses</p>
                        <p className="text-sm font-black text-emerald-400" style={{ fontFamily: "'JetBrains Mono',monospace", textShadow: "0 0 12px rgba(52,211,153,0.3)" }}>
                          S/ {(res.resumen.montoIndebido * 36).toFixed(2)}
                        </p>
                      </div>
                    </div>
                  )}
                </div>
                <div className="px-5 py-3 bg-black/30 border-t border-white/[0.04] flex items-center gap-2">
                  <Lock size={10} className="text-emerald-400/40" />
                  <p className="text-[10px] text-white/25">La operadora tiene la carga de prueba (Art. 118-A TUO). Sin los 4 registros  nulidad del cobro.</p>
                </div>
              </div>

              {/* Individual findings */}
              <div className="space-y-3">
                {res.hallazgos.map((h, i) => (
                  <div key={i} className="rounded-xl border border-white/[0.04] bg-white/[0.01] p-4 hover:bg-white/[0.025] hover:border-red-500/10 transition-all duration-300 animate-slide-in"
                    style={{ animationDelay: `${i * 0.1}s`, animationFillMode: "backwards" }}>
                    <div className="flex items-center gap-2 mb-2">
                      <div className="w-6 h-6 rounded-md bg-red-500/15 border border-red-500/20 flex items-center justify-center text-red-400 text-[10px] font-black flex-shrink-0">{i + 1}</div>
                      <Badge c={h.risk === "alto" ? "red" : "amber"}>{h.tipo}</Badge>
                      <span className="text-sm font-black text-white/60">{h.kw}</span>
                      {h.monto !== undefined && h.monto !== 0 && (
                        <span className="ml-auto text-sm font-black text-red-400 mono" style={{ textShadow: "0 0 12px rgba(248,113,113,0.3)" }}>
                          S/ {Math.abs(h.monto).toFixed(2)}
                        </span>
                      )}
                    </div>
                    <div className="text-xs text-white/15 bg-black/30 rounded-lg p-2.5 mb-2 border border-white/[0.02] mono" style={{ fontSize: "10px" }}>{h.ctx}</div>
                    <div className="text-xs text-emerald-400/40 mb-2 flex items-center gap-1">
                      <Lock size={10} /> {h.norma}
                    </div>
                    {h.accion && (
                      <div className="text-xs text-amber-400/30 bg-amber-500/[0.03] rounded-lg p-2.5 border border-amber-500/[0.06]">
                        <span className="font-bold text-amber-400/50">ACCIN </span> {h.accion}
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </>
          )}
        </Glass>
      )}

      {/*  CTA: Go to Calculator  */}
      {res && res.hallazgos.length > 0 && (
        <div className="animate-slide-in" style={{ animationDelay: "0.3s", animationFillMode: "backwards" }}>
          <button onClick={() => { 
            const evt = new CustomEvent("signal-nav", { detail: "calc" });
            window.dispatchEvent(evt);
          }}
            className="w-full group relative flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-emerald-500/10 to-cyan-500/10 border border-emerald-500/20 rounded-2xl text-emerald-400 font-black text-sm tracking-widest uppercase transition-all duration-300 hover:from-emerald-500/20 hover:to-cyan-500/20 hover:border-emerald-500/30 hover:shadow-lg hover:shadow-emerald-500/10">
            <Calculator size={18} strokeWidth={2.5} />
            CALCULAR DEVOLUCIN TOTAL
            <ArrowRight size={16} strokeWidth={3} className="group-hover:translate-x-1 transition-transform" />
          </button>
        </div>
      )}

      {/*  LEAD CAPTURE: Recupera tu dinero  */}
      {res && res.hallazgos.length > 0 && (
        <LeadCapture findings={res.hallazgos} resumen={res.resumen} reciboData={res.reciboData} />
      )}

      {/* Chat IA Post-Anlisis  MOVED HERE for visibility */}
      {res && (
        <ChatIA receiptText={txt} analysisResult={res} aiResult={aiResult} />
      )}

      {/* Checklist */}
      {/* AI Deep Analysis */}
      {(aiLoading || aiResult) && (
        <Glass glow className="p-5" style={{ animation: "slideIn 0.5s ease-out" }}>
          <h3 className="text-xs font-black tracking-widest text-white/40 uppercase mb-4 flex items-center gap-2">
            <HoloIcon icon={Zap} size={14} color="rgba(168,85,247,0.6)" /> Anlisis IA  Claude Sonnet
          </h3>

          {aiLoading && (
            <div className="flex flex-col items-center gap-4 py-8">
              <div className="relative">
                <div className="w-16 h-16 rounded-full border-2 border-purple-400/30 border-t-purple-400 animate-spin" />
                <div className="absolute inset-0 flex items-center justify-center">
                  <Cpu size={20} className="text-purple-400" style={{ filter: "drop-shadow(0 0 8px rgba(168,85,247,0.4))" }} />
                </div>
              </div>
              <div className="text-center">
                <p className="text-xs text-purple-400/60 font-bold tracking-wide">Claude Sonnet analizando...</p>
                <p className="text-[10px] text-white/15 mt-1">Contrastando contra 10 vectores OSIPTEL</p>
              </div>
            </div>
          )}

          {aiResult && !aiLoading && (
            <>
              {aiResult.error ? (
                <div className="text-xs text-amber-400/50 bg-amber-500/[0.03] rounded-lg p-3 border border-amber-500/[0.06]">
                   No se pudo conectar con Claude ({aiResult.error}). El anlisis local est disponible arriba.
                </div>
              ) : (
                <>
                  {/* AI Verdict */}
                  {aiResult.veredicto === "LIMPIO" ? (
                    <div className="flex items-center gap-3 bg-purple-500/[0.04] rounded-xl p-4 border border-purple-500/10 mb-3">
                      <CheckCircle2 size={20} className="text-purple-400 flex-shrink-0" style={{ filter: "drop-shadow(0 0 6px rgba(168,85,247,0.3))" }} />
                      <div>
                        <p className="text-sm text-purple-300 font-bold">IA confirma: Recibo limpio</p>
                        <p className="text-xs text-white/25 mt-0.5">{aiResult.resumen}</p>
                      </div>
                    </div>
                  ) : (
                    <div className="flex items-center gap-3 bg-red-500/[0.04] rounded-xl p-3.5 border border-red-500/10 mb-3">
                      <AlertTriangle size={18} className="text-red-400" />
                      <div>
                        <p className="text-sm text-red-300 font-bold">IA detect {aiResult.hallazgos?.length || 0} cobro(s) cuestionable(s)</p>
                        <p className="text-xs text-white/25 mt-0.5">{aiResult.resumen}</p>
                      </div>
                    </div>
                  )}

                  {/* AI Findings */}
                  {aiResult.hallazgos?.length > 0 && (
                    <div className="space-y-2.5 mb-3">
                      {aiResult.hallazgos.map((h, i) => (
                        <div key={`ai-${i}`} className="rounded-xl border border-purple-500/[0.08] bg-purple-500/[0.02] p-4">
                          <div className="flex items-center gap-2 mb-2">
                            <Badge c={h.riesgo === "ALTO" ? "red" : "amber"}>{h.vector}</Badge>
                            <span className="text-sm font-black text-white/60">{h.concepto}</span>
                            {h.monto > 0 && <span className="ml-auto text-sm font-black text-red-400/70">S/ {h.monto.toFixed(2)}</span>}
                          </div>
                          <div className="text-xs text-emerald-400/40 mb-1.5 flex items-center gap-1">
                            <Lock size={10} /> {h.base_legal}
                          </div>
                          <div className="text-xs text-amber-400/30 bg-amber-500/[0.03] rounded-lg p-2.5 border border-amber-500/[0.06]">
                            <span className="font-bold text-amber-400/50">ACCIN </span> {h.accion}
                          </div>
                        </div>
                      ))}
                    </div>
                  )}

                  {/* Legitimate concepts */}
                  {aiResult.conceptos_legitimos?.length > 0 && (
                    <div className="text-xs text-white/15 mb-3">
                      <span className="text-emerald-400/30 font-bold">Conceptos legtimos verificados:</span>{" "}
                      {aiResult.conceptos_legitimos.join(", ")}
                    </div>
                  )}

                  {/* Complaint letter */}
                  {aiResult.carta_reclamo && (
                    <div className="rounded-xl border border-amber-500/[0.1] bg-amber-500/[0.02] p-4">
                      <div className="flex items-center gap-2 mb-2">
                        <HoloIcon icon={FileText} size={14} color="rgba(251,191,36,0.5)" />
                        <h4 className="text-xs font-black tracking-widest text-amber-400/40 uppercase">Carta para Libro de Reclamaciones</h4>
                      </div>
                      <p className="text-xs text-white/30 leading-relaxed whitespace-pre-wrap">{aiResult.carta_reclamo}</p>
                      <button onClick={() => navigator.clipboard?.writeText(aiResult.carta_reclamo)} className="mt-2 text-[10px] text-amber-400/30 hover:text-amber-400/60 transition-colors tracking-wider uppercase font-bold">
                        Copiar texto 
                      </button>
                    </div>
                  )}
                </>
              )}
            </>
          )}
        </Glass>
      )}

      {/* Checklist Art. 118-A */}
      <Glass className="p-5">
        <h4 className="text-xs font-black tracking-widest text-emerald-400/30 uppercase mb-3 flex items-center gap-2">
          <HoloIcon icon={Shield} size={14} color="rgba(52,211,153,0.5)" /> Checklist Art. 118-A
        </h4>
        <p className="text-xs text-white/15 mb-4">La operadora debe demostrar estos 4 registros. La carga de prueba es suya.</p>
        <div className="space-y-3">
          {CK.map(c => (
            <div key={c.id} className="flex items-start gap-3 group/ck">
              <div className="flex-shrink-0 w-7 h-7 rounded-lg bg-emerald-500/[0.08] border border-emerald-500/[0.12] flex items-center justify-center text-emerald-400 text-xs font-black group-hover/ck:bg-emerald-500/[0.15] group-hover/ck:border-emerald-500/25 transition-all">{c.id}</div>
              <div><p className="text-xs text-white/35 group-hover/ck:text-white/50 transition-colors">{c.label}</p><p className="text-xs text-white/12">{c.art}</p></div>
            </div>
          ))}
        </div>
      </Glass>

      {/* Botn recibo de prueba  siempre visible */}
      <Glass className="p-4">
        <button onClick={() => {
          const sampleReceipt = `Integratel Per S.A.A. | R.U.C. 20100017491 | Jr. Domingo Martnez Lujn N 1130 | Lima  Lima - Surquillo Pgina 1/3
Movistar Mvil
Recibo Febrero
MARIA ELENA GUTIERREZ TORRES
DNI: 45678912
Telfonos asociados: 987654321
Total a pagar S/89.50
Ciclo de facturacin - Febrero 2026
Resumen del recibo - N S7AA-0099887766
Cargos Mensuales S/ 69.90
Plan Postpago 45GB (01Feb al 28Feb) 59.24 10.66 69.90
Servicios de Contenido S/ 12.90
Club Msica Premium (N corto 6789) 4.15 0.75 4.90
Alertas Horscopo Diario (N corto 5432) 2.46 0.44 2.90
Trivias SMS Gold (N corto 8877) 4.32 0.78 5.10
Descuentos y Bonificaciones S/ 0.00
Redondeo S/ -0.18
Subtotal S/ 75.85
IGV (18%) S/ 13.65
Total facturado S/ 89.50
Conceptos facturables
Cargos fijos mensuales cargo mensual facturado al cliente por el plan contratado para los servicios de voz y datos.`;
          setTxt(sampleReceipt);
          setRes(null);
          setAiResult(null);
          setAiLoading(false);
          setUploadMsg("");
        }} className="w-full flex items-center justify-center gap-2 py-3 text-xs text-amber-400/30 hover:text-amber-400/50 border border-dashed border-amber-500/[0.1] hover:border-amber-500/20 rounded-xl transition-all hover:bg-amber-500/[0.02]">
          <FileDown size={14} />  Cargar recibo de DEMO (con 3 cobros VAS ilegales)
        </button>
      </Glass>
    </div>
  );
}

//  Lead Capture: Convierte hallazgos en clientes 
function LeadCapture({ findings, resumen, reciboData }) {
  const [nombre, setNombre] = useState("");
  const [telefono, setTelefono] = useState("");
  const [enviado, setEnviado] = useState(false);
  const WA_NUMBER = "51955008668";

  const montoMensual = resumen?.montoIndebido || 0;
  const monto36 = montoMensual * 36;
  const nHallazgos = findings?.length || 0;
  const operadora = reciboData?.operadora || "tu operadora";

  const buildWhatsAppMsg = () => {
    const conceptos = findings.map(f => ` ${f.kw}: S/ ${Math.abs(f.monto || 0).toFixed(2)}`).join("\n");
    return encodeURIComponent(
` *COBROS INDEBIDOS DETECTADOS POR AXONEXUS SIGNAL*

Hola, Signal detect *${nHallazgos} cobro(s) indebido(s)* en mi recibo de *${operadora}*.

 *Detalle:*
${conceptos}

 *Total mensual:* S/ ${montoMensual.toFixed(2)}
 *Estimado 36 meses:* S/ ${monto36.toFixed(2)}

${nombre ? ` *Nombre:* ${nombre}` : ""}
${telefono ? ` *Telfono:* ${telefono}` : ""}

Quiero recuperar mi dinero. Cmo procedo?`
    );
  };

  const openWhatsApp = () => {
    window.open(`https://wa.me/${WA_NUMBER}?text=${buildWhatsAppMsg()}`, "_blank");
  };

  const handleSubmit = () => {
    if (!nombre.trim()) return;
    setEnviado(true);
    openWhatsApp();
  };

  return (
    <div className="rounded-2xl overflow-hidden" style={{ 
      background: "linear-gradient(135deg, rgba(16,185,129,0.06), rgba(6,182,212,0.04), rgba(168,85,247,0.03))", 
      border: "1px solid rgba(16,185,129,0.2)",
      boxShadow: "0 0 30px rgba(16,185,129,0.06)"
    }}>
      {/* Header */}
      <div className="px-5 pt-5 pb-4">
        <div className="flex items-center gap-3 mb-3">
          <div className="w-10 h-10 rounded-xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-lg">
            
          </div>
          <div>
            <h3 className="text-sm font-black text-emerald-400">Quieres recuperar tu dinero?</h3>
            <p className="text-[11px] text-white/25">Nuestro equipo legal se encarga. Solo cobramos si ganamos.</p>
          </div>
        </div>

        {/* Value proposition */}
        <div className="grid grid-cols-3 gap-2 mb-4">
          <div className="rounded-xl bg-black/30 border border-white/[0.04] p-2.5 text-center">
            <p className="text-lg font-black text-emerald-400" style={{ fontFamily: "'JetBrains Mono',monospace" }}>
              S/ {monto36.toFixed(0)}
            </p>
            <p className="text-[9px] text-white/20 mt-0.5">A RECUPERAR</p>
          </div>
          <div className="rounded-xl bg-black/30 border border-white/[0.04] p-2.5 text-center">
            <p className="text-lg font-black text-white/50" style={{ fontFamily: "'JetBrains Mono',monospace" }}>
              0%
            </p>
            <p className="text-[9px] text-white/20 mt-0.5">COSTO INICIAL</p>
          </div>
          <div className="rounded-xl bg-black/30 border border-white/[0.04] p-2.5 text-center">
            <p className="text-lg font-black text-amber-400" style={{ fontFamily: "'JetBrains Mono',monospace" }}>
              30%
            </p>
            <p className="text-[9px] text-white/20 mt-0.5">SOLO SI GANAMOS</p>
          </div>
        </div>

        {!enviado ? (
          <>
            {/* Form */}
            <div className="space-y-2.5 mb-4">
              <input 
                type="text" value={nombre} onChange={e => setNombre(e.target.value)}
                placeholder="Tu nombre completo"
                className="w-full bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3 text-xs text-white/50 placeholder-white/12 focus:outline-none focus:border-emerald-500/25 transition-all"
              />
              <input 
                type="tel" value={telefono} onChange={e => setTelefono(e.target.value)}
                placeholder="Tu nmero de celular (opcional)"
                className="w-full bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3 text-xs text-white/50 placeholder-white/12 focus:outline-none focus:border-emerald-500/25 transition-all"
              />
            </div>

            {/* WhatsApp CTA */}
            <button onClick={handleSubmit} disabled={!nombre.trim()}
              className="w-full flex items-center justify-center gap-3 px-6 py-4 rounded-xl font-black text-sm tracking-wider transition-all duration-300 hover:scale-[1.02] active:scale-100 disabled:opacity-30 disabled:cursor-not-allowed"
              style={{ 
                background: "linear-gradient(135deg, #25D366, #128C7E)",
                color: "white",
                boxShadow: "0 4px 20px rgba(37,211,102,0.3)"
              }}>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
              HABLAR CON UN ASESOR AHORA
            </button>

            <p className="text-center text-[10px] text-white/15 mt-2">
              Te contactamos en menos de 24 horas. Sin compromiso.
            </p>
          </>
        ) : (
          <div className="text-center py-4">
            <div className="text-3xl mb-2"></div>
            <p className="text-sm font-bold text-emerald-400">Mensaje enviado!</p>
            <p className="text-xs text-white/25 mt-1">Te contactaremos pronto por WhatsApp.</p>
            <button onClick={openWhatsApp} className="mt-3 text-xs text-emerald-400/40 hover:text-emerald-400/60 underline transition-colors">
              No se abri WhatsApp? Click aqu
            </button>
          </div>
        )}
      </div>

      {/* Footer trust */}
      <div className="px-5 py-3 bg-black/30 border-t border-white/[0.04] flex items-center justify-center gap-4">
        <div className="flex items-center gap-1.5 text-[10px] text-white/15">
          <Lock size={10} className="text-emerald-400/30" /> Tus datos son confidenciales
        </div>
        <div className="flex items-center gap-1.5 text-[10px] text-white/15">
          <Shield size={10} className="text-emerald-400/30" /> Sin costo inicial
        </div>
        <div className="flex items-center gap-1.5 text-[10px] text-white/15">
          <CheckCircle2 size={10} className="text-emerald-400/30" /> Solo cobramos si ganamos
        </div>
      </div>
    </div>
  );
}

//  Chat IA Post-Anlisis 
function ChatIA({ receiptText, analysisResult, aiResult }) {
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const [loading, setLoading] = useState(false);
  const chatEndRef = useRef(null);

  useEffect(() => {
    chatEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  const sendMessage = async () => {
    if (!input.trim() || loading) return;
    const userMsg = input.trim();
    setInput("");
    setMessages(prev => [...prev, { role: "user", content: userMsg }]);
    setLoading(true);

    try {
      const context = `RECIBO:\n${receiptText.substring(0, 4000)}\n\nANLISIS LOCAL: ${JSON.stringify(analysisResult?.resumen || {})}\nHALLAZGOS: ${JSON.stringify(analysisResult?.hallazgos || [])}\nANLISIS IA: ${JSON.stringify(aiResult?.veredicto || "no disponible")}`;

      const conversationHistory = messages.map(m => ({ role: m.role, content: m.content }));
      conversationHistory.push({ role: "user", content: userMsg });

      const response = await fetch("/api/analyze", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "claude-sonnet-4-20250514",
          max_tokens: 2000,
          system: `Eres el asistente legal de Axonexus Signal, especialista en telecomunicaciones peruanas.
El usuario ya analiz su recibo. Responde sus preguntas sobre el recibo, cobros, derechos, cmo reclamar, etc.
S conciso y til. Cita artculos OSIPTEL cuando sea relevante.
Si te piden generar una carta de reclamo, incluye todos los datos del recibo.
CONTEXTO DEL RECIBO Y ANLISIS:\n${context}`,
          messages: conversationHistory,
        }),
      });

      const data = await response.json();
      const aiText = data.content?.map(c => c.text || "").join("") || "Error al procesar respuesta";
      setMessages(prev => [...prev, { role: "assistant", content: aiText }]);
    } catch (err) {
      setMessages(prev => [...prev, { role: "assistant", content: "Error de conexin. Intenta de nuevo." }]);
    }
    setLoading(false);
  };

  const suggestions = [
    { text: "Cmo reclamo ante OSIPTEL?", icon: "" },
    { text: "Genera carta para Libro de Reclamaciones", icon: "" },
    { text: "Cunto me deben devolver?", icon: "" },
    { text: "Qu dice la ley sobre este cobro?", icon: "" },
  ];

  return (
    <Glass className="p-5 overflow-hidden" style={{ background: "linear-gradient(180deg, rgba(6,182,212,0.02), rgba(0,0,0,0))" }}>
      <h4 className="text-xs font-black tracking-widest text-cyan-400/40 uppercase mb-4 flex items-center gap-2">
        <HoloIcon icon={MessageCircle} size={14} color="rgba(34,211,238,0.5)" /> 
        Consulta IA sobre tu recibo
        <span className="ml-auto px-2 py-0.5 rounded-full bg-cyan-500/[0.06] border border-cyan-500/[0.1] text-[9px] text-cyan-400/40">LIVE</span>
      </h4>

      {messages.length === 0 && (
        <div className="grid grid-cols-2 gap-2 mb-4">
          {suggestions.map((s, i) => (
            <button key={i} onClick={() => { setInput(s.text); }} 
              className="flex items-center gap-2 px-3 py-2.5 text-left text-[11px] text-white/25 border border-white/[0.04] rounded-xl hover:border-cyan-500/15 hover:text-white/40 hover:bg-cyan-500/[0.02] transition-all">
              <span className="text-sm">{s.icon}</span>
              <span>{s.text}</span>
            </button>
          ))}
        </div>
      )}

      {messages.length > 0 && (
        <div className="space-y-3 mb-4 max-h-96 overflow-y-auto pr-1 scrollbar-thin" style={{ scrollbarWidth: "thin" }}>
          {messages.map((m, i) => (
            <div key={i} className={`flex ${m.role === "user" ? "justify-end" : "justify-start"}`}
              style={{ animation: "slideIn 0.3s ease-out" }}>
              <div className={`max-w-[85%] rounded-2xl p-3.5 text-xs leading-relaxed ${
                m.role === "user" 
                  ? "bg-gradient-to-br from-cyan-500/[0.1] to-emerald-500/[0.05] border border-cyan-500/[0.15] text-cyan-200/60 rounded-br-md" 
                  : "bg-white/[0.025] border border-white/[0.06] text-white/45 rounded-bl-md"
              }`}>
                <div className="whitespace-pre-wrap">{m.content}</div>
                {m.role === "assistant" && (
                  <button onClick={() => navigator.clipboard?.writeText(m.content)} 
                    className="mt-2 flex items-center gap-1 text-[10px] text-white/10 hover:text-white/30 transition-colors">
                    <Copy size={10} />Copiar
                  </button>
                )}
              </div>
            </div>
          ))}
          {loading && (
            <div className="flex justify-start">
              <div className="rounded-2xl rounded-bl-md p-3.5 bg-white/[0.025] border border-white/[0.06]">
                <div className="flex items-center gap-2">
                  <div className="flex gap-1">
                    <div className="w-1.5 h-1.5 rounded-full bg-cyan-400/40 animate-bounce" style={{ animationDelay: "0ms" }} />
                    <div className="w-1.5 h-1.5 rounded-full bg-cyan-400/40 animate-bounce" style={{ animationDelay: "150ms" }} />
                    <div className="w-1.5 h-1.5 rounded-full bg-cyan-400/40 animate-bounce" style={{ animationDelay: "300ms" }} />
                  </div>
                  <span className="text-[10px] text-white/15">Claude analizando...</span>
                </div>
              </div>
            </div>
          )}
          <div ref={chatEndRef} />
        </div>
      )}

      <div className="flex gap-2">
        <input 
          type="text" 
          value={input} 
          onChange={e => setInput(e.target.value)}
          onKeyDown={e => e.key === "Enter" && sendMessage()}
          placeholder="Pregunta sobre tu recibo..."
          className="flex-1 bg-white/[0.02] border border-white/[0.06] rounded-xl px-4 py-3 text-xs text-white/50 placeholder-white/12 focus:outline-none focus:border-cyan-500/25 focus:bg-white/[0.03] transition-all"
        />
        <button onClick={sendMessage} disabled={loading || !input.trim()}
          className="px-5 py-3 rounded-xl text-black font-black text-xs tracking-widest disabled:opacity-20 transition-all hover:shadow-lg hover:shadow-cyan-500/20"
          style={{ background: "linear-gradient(135deg, #06b6d4, #10b981)" }}>
          <Send size={14} strokeWidth={2.5} />
        </button>
      </div>
    </Glass>
  );
}

//  Tab: Cobranza 
function TCobranza() {
  const [ll, setLl] = useState([{ fecha: "", hora: "", origen: "" }]);
  const [inf, setInf] = useState(null);
  const add = () => setLl([...ll, { fecha: "", hora: "", origen: "" }]);
  const upd = (i, f, v) => { const c = [...ll]; c[i][f] = v; setLl(c); };
  const del_ = i => setLl(ll.filter((_, j) => j !== i));

  return (
    <div className="space-y-5 p-5">
      <Glass className="p-5">
        <div className="flex items-center gap-2 mb-1">
          <HoloIcon icon={PhoneOff} size={16} color="rgb(103,232,249)" />
          <h3 className="text-xs font-black tracking-widest text-white/40 uppercase">Llamadas de cobranza</h3>
        </div>
        <p className="text-xs text-white/15 mb-4">Registra las llamadas recibidas para contrastar contra Art. 62 Ley 29571.</p>
        <div className="space-y-2">
          <div className="grid grid-cols-12 gap-2 text-xs text-white/20 font-black tracking-widest px-1" style={{ fontSize: "10px" }}>
            <div className="col-span-4">FECHA</div><div className="col-span-3">HORA</div><div className="col-span-4">ORIGEN</div><div className="col-span-1"></div>
          </div>
          {ll.map((l, i) => (
            <div key={i} className="grid grid-cols-12 gap-2">
              <input type="date" value={l.fecha} onChange={e => upd(i, "fecha", e.target.value)}
                className="col-span-4 bg-white/[0.015] border border-white/[0.05] rounded-lg px-3 py-2 text-xs text-white/50 focus:outline-none focus:border-emerald-500/25 transition-colors" />
              <input type="time" value={l.hora} onChange={e => upd(i, "hora", e.target.value)}
                className="col-span-3 bg-white/[0.015] border border-white/[0.05] rounded-lg px-3 py-2 text-xs text-white/50 focus:outline-none focus:border-emerald-500/25 transition-colors" />
              <input type="text" value={l.origen} onChange={e => upd(i, "origen", e.target.value)} placeholder="01-611..."
                className="col-span-4 bg-white/[0.015] border border-white/[0.05] rounded-lg px-3 py-2 text-xs text-white/50 placeholder-white/10 focus:outline-none focus:border-emerald-500/25 transition-colors" />
              <button onClick={() => del_(i)} className="col-span-1 text-white/10 hover:text-red-400 transition-colors flex items-center justify-center"><X size={14} /></button>
            </div>
          ))}
        </div>
        <div className="flex gap-3 mt-3">
          <button onClick={add} className="px-3 py-1.5 text-xs text-white/20 hover:text-white/50 border border-white/[0.05] hover:border-white/10 rounded-lg transition-all tracking-wider">+ Agregar</button>
          <button onClick={() => setInf(scanCalls(ll))}
            className="px-5 py-1.5 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-lg text-black font-black text-xs tracking-widest uppercase">
            Verificar horarios
          </button>
        </div>
      </Glass>

      {inf !== null && (
        <Glass glow className="p-5">
          {inf.length === 0 ? (
            <div className="flex items-center gap-3 bg-emerald-500/[0.04] rounded-xl p-4 border border-emerald-500/10">
              <CheckCircle2 size={20} className="text-emerald-400" style={{ filter: "drop-shadow(0 0 6px rgba(52,211,153,0.3))" }} />
              <p className="text-sm text-emerald-400 font-bold">Todas dentro del horario legal.</p>
            </div>
          ) : (
            <div className="space-y-2.5">
              <div className="flex items-center gap-2 bg-red-500/[0.04] p-3 rounded-xl border border-red-500/10 mb-3">
                <AlertTriangle size={16} className="text-red-400" />
                <span className="text-xs text-red-300 font-bold">{inf.length} infraccin(es) al Art. 62</span>
              </div>
              {inf.map((f, i) => (
                <div key={i} className="rounded-xl border border-red-500/10 bg-red-500/[0.015] p-3.5">
                  <div className="flex items-center gap-2 mb-1">
                    <Badge c="red">INFRACCIN</Badge>
                    <span className="text-xs text-white/40">{f.fecha}  {f.hora}</span>
                  </div>
                  <p className="text-xs text-red-300/50">{f.inf}</p>
                  <p className="text-xs text-white/12 mt-1">{f.n}</p>
                </div>
              ))}
            </div>
          )}
        </Glass>
      )}
    </div>
  );
}

//  Tab: Liquidar 
function TCalc({ findings }) {
  const [c, setC] = useState("5.00");
  const [m, setM] = useState("36");
  const [r, setR] = useState(null);
  const [fee, setFee] = useState("30");
  const go = () => { const cv = parseFloat(c), mv = parseInt(m); if (cv > 0 && mv > 0) setR(calcDev(cv, mv)); };
  const show = [1, 3, 6, 12, 18, 24, 30, 36, 48, 60];

  // Auto-fill from findings
  const autoFill = () => {
    const totalMonto = findings.reduce((sum, f) => sum + (Math.abs(f.monto) || 0), 0);
    if (totalMonto > 0) setC(totalMonto.toFixed(2));
  };

  const totalDev = r ? r.td : 0;
  const successFee = totalDev * (parseInt(fee) / 100);

  return (
    <div className="space-y-5 p-5">
      <Glass className="p-5">
        <div className="flex items-center gap-2 mb-1">
          <HoloIcon icon={Calculator} size={16} color="rgb(251,191,36)" />
          <h3 className="text-xs font-black tracking-widest text-white/40 uppercase">Motor de liquidacin</h3>
        </div>
        <p className="text-xs text-white/15 mb-4">Disp. Final Sptima TUO: inters legal mximo BCR (referencial 4% anual).</p>

        {findings.length > 0 && findings.some(f => f.monto > 0) && (
          <button onClick={autoFill} className="mb-3 px-3 py-1.5 text-[11px] text-amber-400/40 border border-amber-500/[0.1] rounded-lg hover:border-amber-500/25 hover:text-amber-400/60 transition-all">
             Auto-llenar desde hallazgos detectados (S/ {findings.reduce((s, f) => s + (Math.abs(f.monto) || 0), 0).toFixed(2)}/mes)
          </button>
        )}

        <div className="grid grid-cols-3 gap-4">
          <div>
            <label className="block text-xs text-white/20 mb-1.5 font-bold tracking-wider">CARGO MENSUAL (S/)</label>
            <input type="number" value={c} onChange={e => setC(e.target.value)} step="0.01"
              className="w-full bg-white/[0.015] border border-white/[0.05] rounded-xl px-3 py-2.5 text-sm text-white/60 focus:outline-none focus:border-emerald-500/25 transition-colors" />
          </div>
          <div>
            <label className="block text-xs text-white/20 mb-1.5 font-bold tracking-wider">MESES</label>
            <input type="number" value={m} onChange={e => setM(e.target.value)} min="1" max="120"
              className="w-full bg-white/[0.015] border border-white/[0.05] rounded-xl px-3 py-2.5 text-sm text-white/60 focus:outline-none focus:border-emerald-500/25 transition-colors" />
          </div>
          <div>
            <label className="block text-xs text-white/20 mb-1.5 font-bold tracking-wider">SUCCESS FEE %</label>
            <input type="number" value={fee} onChange={e => setFee(e.target.value)} min="0" max="50"
              className="w-full bg-white/[0.015] border border-white/[0.05] rounded-xl px-3 py-2.5 text-sm text-white/60 focus:outline-none focus:border-emerald-500/25 transition-colors" />
          </div>
        </div>
        <button onClick={go}
          className="mt-4 px-6 py-2.5 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl text-black font-black text-xs tracking-widest uppercase hover:shadow-xl hover:shadow-emerald-500/20 transition-all">
          <span className="flex items-center gap-2"><Zap size={14} strokeWidth={2.5} /> Liquidar monto</span>
        </button>
      </Glass>

      {r && (
        <Glass glow className="p-5">
          <div className="grid grid-cols-4 gap-3 mb-5">
            {[
              { label: "Capital cobrado", value: r.tc, color: "text-white/60", border: "border-white/[0.04]" },
              { label: "Inters legal", value: r.ti, color: "text-amber-400", border: "border-amber-500/10" },
              { label: "Total a devolver", value: r.td, color: "text-emerald-400", border: "border-emerald-500/15 bg-emerald-500/[0.03]" },
              { label: `Fee ${fee}%`, value: successFee, color: "text-cyan-400", border: "border-cyan-500/15 bg-cyan-500/[0.03]" },
            ].map((item, i) => (
              <div key={i} className={`rounded-xl bg-white/[0.015] border ${item.border} p-3.5 text-center`}>
                <p className="text-xs text-white/20 mb-1">{item.label}</p>
                <p className={`text-lg font-black ${item.color}`} style={{ fontFamily: "'JetBrains Mono',monospace" }}>
                  S/ {item.value.toFixed(2)}
                </p>
              </div>
            ))}
          </div>

          <div className="overflow-x-auto">
            <table className="w-full text-xs"><thead><tr className="border-b border-white/[0.05]">
              {["Mes","Cargo","Acum.","Int. mes","Int. acum.","Total"].map(h => (
                <th key={h} className="text-right py-2 px-2 text-white/15 font-black tracking-wider uppercase first:text-left" style={{ fontSize: "10px" }}>{h}</th>
              ))}
            </tr></thead><tbody>
              {r.d.filter(d => show.includes(d.mes) && d.mes <= parseInt(m)).map(d => (
                <tr key={d.mes} className={`border-b border-white/[0.02] ${d.mes === parseInt(m) ? "bg-emerald-500/[0.03]" : ""}`}>
                  <td className="py-2 px-2 text-white/25" style={{ fontFamily: "monospace" }}>{d.mes}</td>
                  <td className="py-2 px-2 text-right text-white/20" style={{ fontFamily: "monospace" }}>S/ {d.cargo.toFixed(2)}</td>
                  <td className="py-2 px-2 text-right text-white/35" style={{ fontFamily: "monospace" }}>S/ {d.ca.toFixed(2)}</td>
                  <td className="py-2 px-2 text-right text-white/12" style={{ fontFamily: "monospace" }}>S/ {d.im.toFixed(4)}</td>
                  <td className="py-2 px-2 text-right text-amber-400/35" style={{ fontFamily: "monospace" }}>S/ {d.ia.toFixed(2)}</td>
                  <td className={`py-2 px-2 text-right font-black ${d.mes === parseInt(m) ? "text-emerald-400" : "text-white/45"}`} style={{ fontFamily: "monospace" }}>
                    S/ {d.tot.toFixed(2)}
                  </td>
                </tr>
              ))}
            </tbody></table>
          </div>

          <div className="mt-4 p-3 rounded-xl bg-amber-500/[0.025] border border-amber-500/[0.08]">
            <p className="text-xs text-amber-300/30 flex items-center gap-1.5">
              <AlertTriangle size={12} /> Clculo referencial. Tasa legal vara diariamente  consultar BCR.
            </p>
          </div>
        </Glass>
      )}
    </div>
  );
}

//  Tab: Normativa 
function TNorma() {
  const [o, setO] = useState(null);
  const S = [
    { t: "Art. 32 TUO  Conceptos facturables", icon: FileSearch, items: [
      "(i) Tarifa o renta fija","(ii) Instalacin/acceso","(iii) Consumos","(iv) Servicios suplementarios/adicionales",
      "(v) Servicios de terceros con rgimen OSIPTEL","(vi) Recarga","(vii) Equipo terminal y alquiler",
      "(viii) Financiamiento","(ix) Descuentos/devoluciones","(x) Infraestructura","(xi) Intereses",
    ], note: "Lista CERRADA. Gastos de cobranza y penalidades prohibidos." },
    { t: "Art. 118-A  Marcacin doble VAS", icon: Radio, items: CK.map(c => `(${c.id}) ${c.label}`), note: "Carga de prueba: la operadora." },
    { t: "Art. 56 Ley 29571  Mtodos coercitivos", icon: Shield, items: [
      "Prohibido imponer pagos no requeridos","Prohibido modificar sin consentimiento","El silencio NO es aceptacin",
    ]},
    { t: "Arts. 61-62  Cobranza abusiva", icon: PhoneOff, items: [
      "Prohibido: 20:0007:00","Prohibido: sbados/domingos/feriados","Prohibido: documentos pseudo-judiciales","Prohibido: informar a terceros",
    ]},
    { t: "Disp. Final Sptima  Intereses", icon: Calculator, items: ["Mximo: tasa de inters legal del BCR."], note: " tasa legal laboral." },
  ];

  return (
    <div className="space-y-2.5 p-5">
      <p className="text-xs text-white/15 mb-3">Disposiciones clave del TUO OSIPTEL y Ley 29571.</p>
      {S.map((s, i) => (
        <Glass key={i} className="overflow-hidden" hoverGlow={o !== i}>
          <button onClick={() => setO(o === i ? null : i)}
            className="w-full flex items-center gap-3 p-4 text-left transition-colors">
            <HoloIcon icon={s.icon} size={16} active={o === i} />
            <span className="text-xs font-black text-white/40 tracking-wide flex-1">{s.t}</span>
            <ChevronRight size={14} className={`text-white/15 transition-transform duration-300 ${o === i ? "rotate-90" : ""}`} />
          </button>
          {o === i && (
            <div className="px-4 pb-4 border-t border-white/[0.03]">
              <div className="pt-3 space-y-1.5">
                {s.items.map((item, j) => (
                  <div key={j} className="flex gap-2 py-0.5">
                    <span className="text-emerald-500/50 text-xs"></span>
                    <span className="text-xs text-white/30">{item}</span>
                  </div>
                ))}
              </div>
              {s.note && <p className="text-xs text-emerald-400/20 mt-3 pt-2 border-t border-white/[0.03] italic">{s.note}</p>}
            </div>
          )}
        </Glass>
      ))}
    </div>
  );
}

//  App 
export default function App() {
  const [started, setStarted] = useState(false);
  const [tab, setTab] = useState("recibo");
  const [findings, setFindings] = useState([]);
  const [totalRec, setTotalRec] = useState(0);

  const addFinding = useCallback((f) => {
    setFindings(prev => [...prev, f]);
    if (f.monto) setTotalRec(prev => prev + Math.abs(f.monto));
  }, []);

  // Listen for cross-tab navigation events
  useEffect(() => {
    const handler = (e) => setTab(e.detail);
    window.addEventListener("signal-nav", handler);
    return () => window.removeEventListener("signal-nav", handler);
  }, []);

  if (!started) return <><Skyline /><Landing onStart={() => setStarted(true)} /></>;

  return (
    <div className="min-h-screen bg-black text-white relative">
      <Skyline />
      {/* Ambient background */}
      <div className="fixed inset-0 pointer-events-none" style={{ background: "linear-gradient(180deg, #020202 0%, #050505 50%, #0a0a0a 100%)" }}>
        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-emerald-500/[0.015] rounded-full blur-3xl" />
        <div className="absolute bottom-0 right-1/4 w-96 h-96 bg-cyan-500/[0.01] rounded-full blur-3xl" />
      </div>

      <div className="relative z-10">
        {/* Header */}
        <div className="border-b border-white/[0.04] bg-black/70 backdrop-blur-2xl sticky top-0 z-20">
          <div className="max-w-3xl mx-auto">
            <div className="flex items-center justify-between px-4 py-3">
              <Logo />
              <div className="flex items-center gap-3">
                <button onClick={() => setStarted(false)} className="text-xs text-white/12 hover:text-white/35 transition-colors">
                  <ChevronRight size={14} className="rotate-180" />
                </button>
              </div>
            </div>
            <MetricsBar findings={findings.length} totalRecuperable={totalRec} />
            <TabNav tab={tab} set={setTab} />
          </div>
        </div>

        <div className="max-w-3xl mx-auto pt-4">
          <Feed findings={findings} />
          {tab === "recibo" && <TRecibo addFinding={addFinding} />}
          {tab === "cobranza" && <TCobranza />}
          {tab === "calc" && <TCalc findings={findings} />}
          {tab === "norma" && <TNorma />}
        </div>

        {/* Footer */}
        <div className="border-t border-white/[0.03] mt-16">
          <div className="max-w-3xl mx-auto px-4 py-8 flex flex-col items-center gap-3">
            <div className="flex items-center gap-2.5">
              <div className="w-5 h-5 rounded-md bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center">
                <Shield size={10} color="white" strokeWidth={3} />
              </div>
              <span className="text-xs text-white/15 tracking-wider font-bold" style={{ fontFamily: "monospace" }}>
                Axonexus O&#220; &middot; Tallinn, Estonia
              </span>
            </div>
            <p className="text-xs text-white/8 text-center max-w-sm">
              Herramienta informativa. No constituye asesora legal. Tasa de inters referencial  consultar BCR.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}
